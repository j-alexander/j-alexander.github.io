---
layout: post
title: "RdKafka Subscription in F#"
date: 2016-12-08
comments: true
publish: false
---
<h2>Objective</h2>
<p>Apache Kafka represents a powerful tool for linking microservices in a distributed
system with a focus on processing and producing streams of interesting data.</p>
<p>If you're new, check out a <a href="https://kafka.apache.org/intro">quick introduction</a> to the important concepts
in Apache Kafka.</p>
<p><a href="https://github.com/edenhill/librdkafka">RdKafka</a> is a C-native library for interacting with
Apache Kafka that is used in a wide variety of systems and a nice <a href="https://github.com/ah-/rdkafka-dotnet">C# wrapper</a>
is available for it.</p>
<p>Let's look at how to use these from <a href="http://fsharp.org/">F#</a> to support coordinated, high-performance microservices.</p>
<h2>Dependencies</h2>
<ol>
<li>
<p><em>RdKafka</em> from NuGet, or using Paket:</p>
<table class="pre"><tr><td class="snippet"><pre class="fssnip"><code lang="powershell">./.paket/paket.exe add nuget RdKafka project MyProject
</code></pre></td></tr></table>
</li>
<li>
<p><em>Pre-build event</em> to transfer native libraries (64-bit):</p>
<table class="pre"><tr><td class="snippet"><pre class="fssnip"><code lang="powershell">xcopy /y /d /f
     "$(ProjectDir)..\packages\RdKafka.Internal.librdkafka\runtimes\win7-x64\native\*.*"
     "$(TargetDir)"
</code></pre></td></tr></table>
</li>
<li><p><em>Reference</em> and open the C# wrapper:</p></li>
</ol>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="prep">#r</span> <span class="s">&quot;./packages/RdKafka/lib/net451/RdKafka.dll&quot;</span>

<span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="i">RdKafka</span>
</code></pre>
<h2>Terminology</h2>
<h3>Kafka</h3>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs6', 8)" onmouseover="showTip(event, 'fs6', 8)" class="t">Topic</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs7', 9)" onmouseover="showTip(event, 'fs7', 9)" class="t">string</span>       <span class="c">// https://kafka.apache.org/intro#intro_topics</span>
<span class="k">and</span> <span onmouseout="hideTip(event, 'fs8', 10)" onmouseover="showTip(event, 'fs8', 10)" class="t">Partition</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs9', 11)" onmouseover="showTip(event, 'fs9', 11)" class="t">int</span>       <span class="c">//   partition of a topic</span>
<span class="k">and</span> <span onmouseout="hideTip(event, 'fs10', 12)" onmouseover="showTip(event, 'fs10', 12)" class="t">Offset</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs11', 13)" onmouseover="showTip(event, 'fs11', 13)" class="t">int64</span>        <span class="c">//   offset position within a partition of a topic</span>
<span class="k">and</span> <span onmouseout="hideTip(event, 'fs12', 14)" onmouseover="showTip(event, 'fs12', 14)" class="t">BrokerCsv</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs7', 15)" onmouseover="showTip(event, 'fs7', 15)" class="t">string</span>    <span class="c">// connection string of &quot;broker1:9092,broker2:9092&quot;</span>
                          <span class="c">//   with protocol {http://,tcp://} removed</span>
<span class="k">and</span> <span onmouseout="hideTip(event, 'fs13', 16)" onmouseover="showTip(event, 'fs13', 16)" class="t">ConsumerName</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs7', 17)" onmouseover="showTip(event, 'fs7', 17)" class="t">string</span> <span class="c">// https://kafka.apache.org/intro#intro_consumers</span>
<span class="k">and</span> <span onmouseout="hideTip(event, 'fs14', 18)" onmouseover="showTip(event, 'fs14', 18)" class="t">ErrorReason</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs7', 19)" onmouseover="showTip(event, 'fs7', 19)" class="t">string</span>  
</code></pre>
<h3>RdKafka Events</h3>
<p>RdKafka provides much better transparency than other .NET kafka libraries by
exposing a wide variety of events using callbacks.  Here we define an F# union
type for the various cases.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs15', 20)" onmouseover="showTip(event, 'fs15', 20)" class="t">Event</span> <span class="o">=</span>
  | <span onmouseout="hideTip(event, 'fs16', 21)" onmouseover="showTip(event, 'fs16', 21)" class="p">Statistics</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs7', 22)" onmouseover="showTip(event, 'fs7', 22)" class="t">string</span>
  | <span onmouseout="hideTip(event, 'fs17', 23)" onmouseover="showTip(event, 'fs17', 23)" class="p">OffsetCommit</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs18', 24)" onmouseover="showTip(event, 'fs18', 24)" class="t">ErrorCode</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs19', 25)" onmouseover="showTip(event, 'fs19', 25)" class="t">List</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs6', 26)" onmouseover="showTip(event, 'fs6', 26)" class="t">Topic</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs8', 27)" onmouseover="showTip(event, 'fs8', 27)" class="t">Partition</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs10', 28)" onmouseover="showTip(event, 'fs10', 28)" class="t">Offset</span><span class="o">&gt;</span>
  | <span onmouseout="hideTip(event, 'fs20', 29)" onmouseover="showTip(event, 'fs20', 29)" class="p">EndReached</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs6', 30)" onmouseover="showTip(event, 'fs6', 30)" class="t">Topic</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs8', 31)" onmouseover="showTip(event, 'fs8', 31)" class="t">Partition</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs10', 32)" onmouseover="showTip(event, 'fs10', 32)" class="t">Offset</span>
  | <span onmouseout="hideTip(event, 'fs21', 33)" onmouseover="showTip(event, 'fs21', 33)" class="p">PartitionsAssigned</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs19', 34)" onmouseover="showTip(event, 'fs19', 34)" class="t">List</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs6', 35)" onmouseover="showTip(event, 'fs6', 35)" class="t">Topic</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs8', 36)" onmouseover="showTip(event, 'fs8', 36)" class="t">Partition</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs10', 37)" onmouseover="showTip(event, 'fs10', 37)" class="t">Offset</span><span class="o">&gt;</span>
  | <span onmouseout="hideTip(event, 'fs22', 38)" onmouseover="showTip(event, 'fs22', 38)" class="p">PartitionsRevoked</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs19', 39)" onmouseover="showTip(event, 'fs19', 39)" class="t">List</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs6', 40)" onmouseover="showTip(event, 'fs6', 40)" class="t">Topic</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs8', 41)" onmouseover="showTip(event, 'fs8', 41)" class="t">Partition</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs10', 42)" onmouseover="showTip(event, 'fs10', 42)" class="t">Offset</span><span class="o">&gt;</span>
  | <span onmouseout="hideTip(event, 'fs23', 43)" onmouseover="showTip(event, 'fs23', 43)" class="p">ConsumerError</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs18', 44)" onmouseover="showTip(event, 'fs18', 44)" class="t">ErrorCode</span>
  | <span onmouseout="hideTip(event, 'fs24', 45)" onmouseover="showTip(event, 'fs24', 45)" class="p">Error</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs18', 46)" onmouseover="showTip(event, 'fs18', 46)" class="t">ErrorCode</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs7', 47)" onmouseover="showTip(event, 'fs7', 47)" class="t">string</span>
</code></pre>
<h3>Converting RdKafka Types</h3>
<p>Following are some simple conversions to F# datatypes that are used throughput
our samples:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs25', 48)" onmouseover="showTip(event, 'fs25', 48)" class="f">ofTopicPartitionOffset</span> (<span onmouseout="hideTip(event, 'fs26', 49)" onmouseover="showTip(event, 'fs26', 49)" class="i">tpo</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs27', 50)" onmouseover="showTip(event, 'fs27', 50)" class="t">TopicPartitionOffset</span>) <span class="o">=</span>
  <span onmouseout="hideTip(event, 'fs26', 51)" onmouseover="showTip(event, 'fs26', 51)" class="i">tpo</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs28', 52)" onmouseover="showTip(event, 'fs28', 52)" class="i">Topic</span>,<span onmouseout="hideTip(event, 'fs26', 53)" onmouseover="showTip(event, 'fs26', 53)" class="i">tpo</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs29', 54)" onmouseover="showTip(event, 'fs29', 54)" class="i">Partition</span>,<span onmouseout="hideTip(event, 'fs26', 55)" onmouseover="showTip(event, 'fs26', 55)" class="i">tpo</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs30', 56)" onmouseover="showTip(event, 'fs30', 56)" class="i">Offset</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs31', 57)" onmouseover="showTip(event, 'fs31', 57)" class="f">ofTopicPartitionOffsets</span> <span class="o">=</span>
  <span onmouseout="hideTip(event, 'fs32', 58)" onmouseover="showTip(event, 'fs32', 58)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs33', 59)" onmouseover="showTip(event, 'fs33', 59)" class="f">map</span> <span onmouseout="hideTip(event, 'fs25', 60)" onmouseover="showTip(event, 'fs25', 60)" class="f">ofTopicPartitionOffset</span> <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs32', 61)" onmouseover="showTip(event, 'fs32', 61)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs34', 62)" onmouseover="showTip(event, 'fs34', 62)" class="f">toList</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs35', 63)" onmouseover="showTip(event, 'fs35', 63)" class="f">ofCommit</span> (<span onmouseout="hideTip(event, 'fs36', 64)" onmouseover="showTip(event, 'fs36', 64)" class="i">oca</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs37', 65)" onmouseover="showTip(event, 'fs37', 65)" class="i">Consumer</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs38', 66)" onmouseover="showTip(event, 'fs38', 66)" class="t">OffsetCommitArgs</span>) <span class="o">=</span>
  <span onmouseout="hideTip(event, 'fs36', 67)" onmouseover="showTip(event, 'fs36', 67)" class="i">oca</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs39', 68)" onmouseover="showTip(event, 'fs39', 68)" class="i">Error</span>,<span onmouseout="hideTip(event, 'fs31', 69)" onmouseover="showTip(event, 'fs31', 69)" class="f">ofTopicPartitionOffsets</span> <span onmouseout="hideTip(event, 'fs36', 70)" onmouseover="showTip(event, 'fs36', 70)" class="i">oca</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs40', 71)" onmouseover="showTip(event, 'fs40', 71)" class="i">Offsets</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs41', 72)" onmouseover="showTip(event, 'fs41', 72)" class="f">ofError</span> (<span onmouseout="hideTip(event, 'fs42', 73)" onmouseover="showTip(event, 'fs42', 73)" class="i">ea</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs43', 74)" onmouseover="showTip(event, 'fs43', 74)" class="i">Handle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs44', 75)" onmouseover="showTip(event, 'fs44', 75)" class="t">ErrorArgs</span>) <span class="o">=</span>
  <span onmouseout="hideTip(event, 'fs42', 76)" onmouseover="showTip(event, 'fs42', 76)" class="i">ea</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs45', 77)" onmouseover="showTip(event, 'fs45', 77)" class="i">ErrorCode</span>,<span onmouseout="hideTip(event, 'fs42', 78)" onmouseover="showTip(event, 'fs42', 78)" class="i">ea</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs46', 79)" onmouseover="showTip(event, 'fs46', 79)" class="i">Reason</span>
</code></pre>
<h3>Logging RdKafka Events</h3>
<p>Consider using an exhaustive pattern match on the Event union type to provide highly granular
logging. As you're working with the library, these cases will give you valuable insight:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs47', 80)" onmouseover="showTip(event, 'fs47', 80)" class="f">toLog</span> <span class="o">=</span> <span class="k">function</span>
  | <span onmouseout="hideTip(event, 'fs15', 81)" onmouseover="showTip(event, 'fs15', 81)" class="t">Event</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs24', 82)" onmouseover="showTip(event, 'fs24', 82)" class="p">Error</span> _ <span class="k">-&gt;</span> () 
<span class="c">//| ...</span>
</code></pre>
<p>You can easily attach your <code>toLog</code> function to callbacks from both the producer and consumer
by mapping the callbacks into cases of the <code>Event</code> type:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs48', 83)" onmouseover="showTip(event, 'fs48', 83)" class="f">fromConsumerToLog</span> (<span onmouseout="hideTip(event, 'fs49', 84)" onmouseover="showTip(event, 'fs49', 84)" class="i">c</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs50', 85)" onmouseover="showTip(event, 'fs50', 85)" class="t">EventConsumer</span>) <span class="o">=</span>
  <span onmouseout="hideTip(event, 'fs49', 86)" onmouseover="showTip(event, 'fs49', 86)" class="i">c</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs51', 87)" onmouseover="showTip(event, 'fs51', 87)" class="i">OnStatistics</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs52', 88)" onmouseover="showTip(event, 'fs52', 88)" class="f">Add</span>(<span onmouseout="hideTip(event, 'fs16', 89)" onmouseover="showTip(event, 'fs16', 89)" class="p">Statistics</span> <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs47', 90)" onmouseover="showTip(event, 'fs47', 90)" class="f">toLog</span>)
  <span onmouseout="hideTip(event, 'fs49', 91)" onmouseover="showTip(event, 'fs49', 91)" class="i">c</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs53', 92)" onmouseover="showTip(event, 'fs53', 92)" class="i">OnOffsetCommit</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs52', 93)" onmouseover="showTip(event, 'fs52', 93)" class="f">Add</span>(<span onmouseout="hideTip(event, 'fs35', 94)" onmouseover="showTip(event, 'fs35', 94)" class="f">ofCommit</span> <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs17', 95)" onmouseover="showTip(event, 'fs17', 95)" class="p">OffsetCommit</span> <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs47', 96)" onmouseover="showTip(event, 'fs47', 96)" class="f">toLog</span>)
  <span onmouseout="hideTip(event, 'fs49', 97)" onmouseover="showTip(event, 'fs49', 97)" class="i">c</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs54', 98)" onmouseover="showTip(event, 'fs54', 98)" class="i">OnEndReached</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs52', 99)" onmouseover="showTip(event, 'fs52', 99)" class="f">Add</span>(<span onmouseout="hideTip(event, 'fs25', 100)" onmouseover="showTip(event, 'fs25', 100)" class="f">ofTopicPartitionOffset</span> <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs20', 101)" onmouseover="showTip(event, 'fs20', 101)" class="p">EndReached</span> <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs47', 102)" onmouseover="showTip(event, 'fs47', 102)" class="f">toLog</span>)
  <span onmouseout="hideTip(event, 'fs49', 103)" onmouseover="showTip(event, 'fs49', 103)" class="i">c</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs55', 104)" onmouseover="showTip(event, 'fs55', 104)" class="i">OnPartitionsAssigned</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs52', 105)" onmouseover="showTip(event, 'fs52', 105)" class="f">Add</span>(<span onmouseout="hideTip(event, 'fs31', 106)" onmouseover="showTip(event, 'fs31', 106)" class="f">ofTopicPartitionOffsets</span> <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs21', 107)" onmouseover="showTip(event, 'fs21', 107)" class="p">PartitionsAssigned</span> <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs47', 108)" onmouseover="showTip(event, 'fs47', 108)" class="f">toLog</span>)
  <span onmouseout="hideTip(event, 'fs49', 109)" onmouseover="showTip(event, 'fs49', 109)" class="i">c</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs56', 110)" onmouseover="showTip(event, 'fs56', 110)" class="i">OnPartitionsRevoked</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs52', 111)" onmouseover="showTip(event, 'fs52', 111)" class="f">Add</span>(<span onmouseout="hideTip(event, 'fs31', 112)" onmouseover="showTip(event, 'fs31', 112)" class="f">ofTopicPartitionOffsets</span> <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs22', 113)" onmouseover="showTip(event, 'fs22', 113)" class="p">PartitionsRevoked</span> <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs47', 114)" onmouseover="showTip(event, 'fs47', 114)" class="f">toLog</span>)
  <span onmouseout="hideTip(event, 'fs49', 115)" onmouseover="showTip(event, 'fs49', 115)" class="i">c</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs57', 116)" onmouseover="showTip(event, 'fs57', 116)" class="i">OnConsumerError</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs52', 117)" onmouseover="showTip(event, 'fs52', 117)" class="f">Add</span>(<span onmouseout="hideTip(event, 'fs23', 118)" onmouseover="showTip(event, 'fs23', 118)" class="p">ConsumerError</span> <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs47', 119)" onmouseover="showTip(event, 'fs47', 119)" class="f">toLog</span>)
  <span onmouseout="hideTip(event, 'fs49', 120)" onmouseover="showTip(event, 'fs49', 120)" class="i">c</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs58', 121)" onmouseover="showTip(event, 'fs58', 121)" class="i">OnError</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs52', 122)" onmouseover="showTip(event, 'fs52', 122)" class="f">Add</span>(<span onmouseout="hideTip(event, 'fs41', 123)" onmouseover="showTip(event, 'fs41', 123)" class="f">ofError</span> <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs24', 124)" onmouseover="showTip(event, 'fs24', 124)" class="p">Error</span> <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs47', 125)" onmouseover="showTip(event, 'fs47', 125)" class="f">toLog</span>)

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs59', 126)" onmouseover="showTip(event, 'fs59', 126)" class="f">fromProducerToLog</span> (<span onmouseout="hideTip(event, 'fs60', 127)" onmouseover="showTip(event, 'fs60', 127)" class="i">p</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs61', 128)" onmouseover="showTip(event, 'fs61', 128)" class="t">Producer</span>) <span class="o">=</span>
  <span onmouseout="hideTip(event, 'fs60', 129)" onmouseover="showTip(event, 'fs60', 129)" class="i">p</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs58', 130)" onmouseover="showTip(event, 'fs58', 130)" class="i">OnError</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs52', 131)" onmouseover="showTip(event, 'fs52', 131)" class="f">Add</span>(<span onmouseout="hideTip(event, 'fs41', 132)" onmouseover="showTip(event, 'fs41', 132)" class="f">ofError</span> <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs24', 133)" onmouseover="showTip(event, 'fs24', 133)" class="p">Error</span> <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs47', 134)" onmouseover="showTip(event, 'fs47', 134)" class="f">toLog</span>)
  <span onmouseout="hideTip(event, 'fs60', 135)" onmouseover="showTip(event, 'fs60', 135)" class="i">p</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs51', 136)" onmouseover="showTip(event, 'fs51', 136)" class="i">OnStatistics</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs52', 137)" onmouseover="showTip(event, 'fs52', 137)" class="f">Add</span>(<span onmouseout="hideTip(event, 'fs16', 138)" onmouseover="showTip(event, 'fs16', 138)" class="p">Statistics</span> <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs47', 139)" onmouseover="showTip(event, 'fs47', 139)" class="f">toLog</span>)
</code></pre>
<h2>Configuration and Connection</h2>
<p>When you connect to RdKafka, you can configure any of the defaults in the underlying native library.
In particular, there are several settings you may want to consider:</p>
<ol>
<li>
a consumer <em>GroupId</em>, shared by all cooperating instances of a microservice
<ul>
<li><a href="https://github.com/ah-/rdkafka-dotnet/issues/88#issuecomment-264820360">note</a>: for rdkafka 0.9.1 or earlier, setting GroupId on a producer may block Dispose()</li>
</ul>
</li>
<li>whether or not to <em>EnableAutoCommit</em> for tracking your current offset position</li>
<li>whether to save the offsets on the <em>broker</em> for coordination</li>
<li>if your Kafka cluster runs an idle connection reaper, disconnection messages <a href="https://github.com/edenhill/librdkafka/issues/437">will appear</a> at even intervals when idle</li>
<li>a <em>metadata broker list</em> workaround enables you to query additional metadata using the native wrapper</li>
<li>
where to start a <em>brand new</em> consumer group:
<ul>
<li><code>smallest</code> starts processing from the earliest offsets in the topic</li>
<li><code>largest</code>, the default, starts from the newest message offsets</li>
</ul>
</li>
</ol>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs62', 140)" onmouseover="showTip(event, 'fs62', 140)" class="f">connect</span> (<span onmouseout="hideTip(event, 'fs63', 141)" onmouseover="showTip(event, 'fs63', 141)" class="i">brokerCsv</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs12', 142)" onmouseover="showTip(event, 'fs12', 142)" class="t">BrokerCsv</span>) (<span onmouseout="hideTip(event, 'fs64', 143)" onmouseover="showTip(event, 'fs64', 143)" class="i">group</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs13', 144)" onmouseover="showTip(event, 'fs13', 144)" class="t">ConsumerName</span>) (<span onmouseout="hideTip(event, 'fs65', 145)" onmouseover="showTip(event, 'fs65', 145)" class="i">autoCommit</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs66', 146)" onmouseover="showTip(event, 'fs66', 146)" class="t">bool</span>) <span class="o">=</span>
  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs67', 147)" onmouseover="showTip(event, 'fs67', 147)" class="i">config</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs68', 148)" onmouseover="showTip(event, 'fs68', 148)" class="t">Config</span>()
  <span onmouseout="hideTip(event, 'fs67', 149)" onmouseover="showTip(event, 'fs67', 149)" class="i">config</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs69', 150)" onmouseover="showTip(event, 'fs69', 150)" class="i">GroupId</span> <span class="o">&lt;-</span> <span onmouseout="hideTip(event, 'fs64', 151)" onmouseover="showTip(event, 'fs64', 151)" class="i">group</span>                                <span class="c">// (1)</span>
  <span onmouseout="hideTip(event, 'fs67', 152)" onmouseover="showTip(event, 'fs67', 152)" class="i">config</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs70', 153)" onmouseover="showTip(event, 'fs70', 153)" class="i">StatisticsInterval</span> <span class="o">&lt;-</span> <span onmouseout="hideTip(event, 'fs71', 154)" onmouseover="showTip(event, 'fs71', 154)" class="t">TimeSpan</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs72', 155)" onmouseover="showTip(event, 'fs72', 155)" class="f">FromSeconds</span>(<span class="n">1.0</span>)
  <span onmouseout="hideTip(event, 'fs67', 156)" onmouseover="showTip(event, 'fs67', 156)" class="i">config</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs73', 157)" onmouseover="showTip(event, 'fs73', 157)" class="i">EnableAutoCommit</span> <span class="o">&lt;-</span> <span onmouseout="hideTip(event, 'fs65', 158)" onmouseover="showTip(event, 'fs65', 158)" class="i">autoCommit</span>                  <span class="c">// (2)</span>
  <span onmouseout="hideTip(event, 'fs67', 159)" onmouseover="showTip(event, 'fs67', 159)" class="i">config</span><span class="o">.</span>[<span class="s">&quot;offset.store.method&quot;</span>] <span class="o">&lt;-</span> <span class="s">&quot;broker&quot;</span>             <span class="c">// (3)</span>
  <span onmouseout="hideTip(event, 'fs67', 160)" onmouseover="showTip(event, 'fs67', 160)" class="i">config</span><span class="o">.</span>[<span class="s">&quot;log.connection.close&quot;</span>] <span class="o">&lt;-</span> <span class="s">&quot;false&quot;</span>             <span class="c">// (4)</span>
  <span onmouseout="hideTip(event, 'fs67', 161)" onmouseover="showTip(event, 'fs67', 161)" class="i">config</span><span class="o">.</span>[<span class="s">&quot;metadata.broker.list&quot;</span>] <span class="o">&lt;-</span> <span onmouseout="hideTip(event, 'fs63', 162)" onmouseover="showTip(event, 'fs63', 162)" class="i">brokerCsv</span>           <span class="c">// (5)</span>
  <span onmouseout="hideTip(event, 'fs67', 163)" onmouseover="showTip(event, 'fs67', 163)" class="i">config</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs74', 164)" onmouseover="showTip(event, 'fs74', 164)" class="i">DefaultTopicConfig</span> <span class="o">&lt;-</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs75', 165)" onmouseover="showTip(event, 'fs75', 165)" class="i">topicConfig</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs76', 166)" onmouseover="showTip(event, 'fs76', 166)" class="t">TopicConfig</span>()
    <span onmouseout="hideTip(event, 'fs75', 167)" onmouseover="showTip(event, 'fs75', 167)" class="i">topicConfig</span><span class="o">.</span>[<span class="s">&quot;auto.offset.reset&quot;</span>] <span class="o">&lt;-</span> <span class="s">&quot;smallest&quot;</span>      <span class="c">// (6)</span>
    <span onmouseout="hideTip(event, 'fs75', 168)" onmouseover="showTip(event, 'fs75', 168)" class="i">topicConfig</span>

  <span class="k">new</span> <span onmouseout="hideTip(event, 'fs50', 169)" onmouseover="showTip(event, 'fs50', 169)" class="t">EventConsumer</span>(<span onmouseout="hideTip(event, 'fs67', 170)" onmouseover="showTip(event, 'fs67', 170)" class="i">config</span>, <span onmouseout="hideTip(event, 'fs63', 171)" onmouseover="showTip(event, 'fs63', 171)" class="i">brokerCsv</span>),
  <span class="k">new</span> <span onmouseout="hideTip(event, 'fs61', 172)" onmouseover="showTip(event, 'fs61', 172)" class="t">Producer</span>(<span onmouseout="hideTip(event, 'fs67', 173)" onmouseover="showTip(event, 'fs67', 173)" class="i">config</span>, <span onmouseout="hideTip(event, 'fs63', 174)" onmouseover="showTip(event, 'fs63', 174)" class="i">brokerCsv</span>)
</code></pre>
<h3>Publishing</h3>
<p>A partition key and payload can then be published to a topic.  The response
includes a partition and offset position confirming the write.  Consider
<code>Encoding.UTF8.GetBytes</code> if your message is text.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs77', 175)" onmouseover="showTip(event, 'fs77', 175)" class="f">publish</span> (<span onmouseout="hideTip(event, 'fs63', 176)" onmouseover="showTip(event, 'fs63', 176)" class="i">brokerCsv</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs12', 177)" onmouseover="showTip(event, 'fs12', 177)" class="t">BrokerCsv</span>) (<span onmouseout="hideTip(event, 'fs64', 178)" onmouseover="showTip(event, 'fs64', 178)" class="i">group</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs13', 179)" onmouseover="showTip(event, 'fs13', 179)" class="t">ConsumerName</span>) (<span onmouseout="hideTip(event, 'fs78', 180)" onmouseover="showTip(event, 'fs78', 180)" class="i">topic</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs6', 181)" onmouseover="showTip(event, 'fs6', 181)" class="t">Topic</span>) <span class="o">=</span>
  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs79', 182)" onmouseover="showTip(event, 'fs79', 182)" class="i">consumer</span>,<span onmouseout="hideTip(event, 'fs80', 183)" onmouseover="showTip(event, 'fs80', 183)" class="i">producer</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs62', 184)" onmouseover="showTip(event, 'fs62', 184)" class="f">connect</span> <span onmouseout="hideTip(event, 'fs63', 185)" onmouseover="showTip(event, 'fs63', 185)" class="i">brokerCsv</span> <span onmouseout="hideTip(event, 'fs64', 186)" onmouseover="showTip(event, 'fs64', 186)" class="i">group</span> <span class="k">false</span>
  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs78', 187)" onmouseover="showTip(event, 'fs78', 187)" class="i">topic</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs80', 188)" onmouseover="showTip(event, 'fs80', 188)" class="i">producer</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs81', 189)" onmouseover="showTip(event, 'fs81', 189)" class="f">Topic</span>(<span onmouseout="hideTip(event, 'fs78', 190)" onmouseover="showTip(event, 'fs78', 190)" class="i">topic</span>)
  <span class="k">fun</span> (<span onmouseout="hideTip(event, 'fs82', 191)" onmouseover="showTip(event, 'fs82', 191)" class="i">key</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs83', 192)" onmouseover="showTip(event, 'fs83', 192)" class="t">byte</span>[], <span onmouseout="hideTip(event, 'fs84', 193)" onmouseover="showTip(event, 'fs84', 193)" class="i">payload</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs83', 194)" onmouseover="showTip(event, 'fs83', 194)" class="t">byte</span>[]) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs85', 195)" onmouseover="showTip(event, 'fs85', 195)" class="i">async</span> {
    <span class="k">let!</span> <span onmouseout="hideTip(event, 'fs86', 196)" onmouseover="showTip(event, 'fs86', 196)" class="i">report</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs87', 197)" onmouseover="showTip(event, 'fs87', 197)" class="t">Async</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs88', 198)" onmouseover="showTip(event, 'fs88', 198)" class="f">AwaitTask</span>(<span onmouseout="hideTip(event, 'fs78', 199)" onmouseover="showTip(event, 'fs78', 199)" class="i">topic</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs89', 200)" onmouseover="showTip(event, 'fs89', 200)" class="f">Produce</span>(<span onmouseout="hideTip(event, 'fs84', 201)" onmouseover="showTip(event, 'fs84', 201)" class="i">payload</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs84', 202)" onmouseover="showTip(event, 'fs84', 202)" class="i">payload</span>,<span onmouseout="hideTip(event, 'fs82', 203)" onmouseover="showTip(event, 'fs82', 203)" class="i">key</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs82', 204)" onmouseover="showTip(event, 'fs82', 204)" class="i">key</span>))
    <span class="k">return</span> <span onmouseout="hideTip(event, 'fs86', 205)" onmouseover="showTip(event, 'fs86', 205)" class="i">report</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs90', 206)" onmouseover="showTip(event, 'fs90', 206)" class="v">Partition</span>, <span onmouseout="hideTip(event, 'fs86', 207)" onmouseover="showTip(event, 'fs86', 207)" class="i">report</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs91', 208)" onmouseover="showTip(event, 'fs91', 208)" class="v">Offset</span>
  }
</code></pre>
<h3>Subscribing</h3>
<p>To consume, on partition assignment we select <code>Offset.Stored</code>, which defaults to the value of
<code>auto.offset.reset</code> if no stored offset exists.  Messages are then sent to the onMessage callback
once the topic subscription starts.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs92', 209)" onmouseover="showTip(event, 'fs92', 209)" class="f">subscribeCallback</span> (<span onmouseout="hideTip(event, 'fs63', 210)" onmouseover="showTip(event, 'fs63', 210)" class="i">brokerCsv</span>) (<span onmouseout="hideTip(event, 'fs64', 211)" onmouseover="showTip(event, 'fs64', 211)" class="i">group</span>) (<span onmouseout="hideTip(event, 'fs78', 212)" onmouseover="showTip(event, 'fs78', 212)" class="i">topic</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs6', 213)" onmouseover="showTip(event, 'fs6', 213)" class="t">Topic</span>) (<span onmouseout="hideTip(event, 'fs93', 214)" onmouseover="showTip(event, 'fs93', 214)" class="f">onMessage</span>) <span class="o">=</span>
  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs65', 215)" onmouseover="showTip(event, 'fs65', 215)" class="i">autoCommit</span> <span class="o">=</span> <span class="k">true</span>
  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs79', 216)" onmouseover="showTip(event, 'fs79', 216)" class="i">consumer</span>,<span onmouseout="hideTip(event, 'fs80', 217)" onmouseover="showTip(event, 'fs80', 217)" class="i">producer</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs62', 218)" onmouseover="showTip(event, 'fs62', 218)" class="f">connect</span> <span onmouseout="hideTip(event, 'fs63', 219)" onmouseover="showTip(event, 'fs63', 219)" class="i">brokerCsv</span> <span onmouseout="hideTip(event, 'fs64', 220)" onmouseover="showTip(event, 'fs64', 220)" class="i">group</span> <span onmouseout="hideTip(event, 'fs65', 221)" onmouseover="showTip(event, 'fs65', 221)" class="i">autoCommit</span>
  <span onmouseout="hideTip(event, 'fs79', 222)" onmouseover="showTip(event, 'fs79', 222)" class="i">consumer</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs55', 223)" onmouseover="showTip(event, 'fs55', 223)" class="i">OnPartitionsAssigned</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs52', 224)" onmouseover="showTip(event, 'fs52', 224)" class="f">Add</span>(
    <span onmouseout="hideTip(event, 'fs31', 225)" onmouseover="showTip(event, 'fs31', 225)" class="f">ofTopicPartitionOffsets</span>
    <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs19', 226)" onmouseover="showTip(event, 'fs19', 226)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs94', 227)" onmouseover="showTip(event, 'fs94', 227)" class="f">map</span> (<span class="k">fun</span> (<span onmouseout="hideTip(event, 'fs95', 228)" onmouseover="showTip(event, 'fs95', 228)" class="i">t</span>,<span onmouseout="hideTip(event, 'fs96', 229)" onmouseover="showTip(event, 'fs96', 229)" class="i">p</span>,<span onmouseout="hideTip(event, 'fs97', 230)" onmouseover="showTip(event, 'fs97', 230)" class="i">o</span>) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs95', 231)" onmouseover="showTip(event, 'fs95', 231)" class="i">t</span>,<span onmouseout="hideTip(event, 'fs96', 232)" onmouseover="showTip(event, 'fs96', 232)" class="i">p</span>,<span onmouseout="hideTip(event, 'fs10', 233)" onmouseover="showTip(event, 'fs10', 233)" class="t">Offset</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs98', 234)" onmouseover="showTip(event, 'fs98', 234)" class="i">Stored</span>)
    <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs19', 235)" onmouseover="showTip(event, 'fs19', 235)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs94', 236)" onmouseover="showTip(event, 'fs94', 236)" class="f">map</span> <span onmouseout="hideTip(event, 'fs27', 237)" onmouseover="showTip(event, 'fs27', 237)" class="t">TopicPartitionOffset</span>
    <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs99', 238)" onmouseover="showTip(event, 'fs99', 238)" class="i">Collections</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs100', 239)" onmouseover="showTip(event, 'fs100', 239)" class="i">Generic</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs101', 240)" onmouseover="showTip(event, 'fs101', 240)" class="t">List</span><span class="o">&lt;</span>_<span class="o">&gt;</span>
    <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs79', 241)" onmouseover="showTip(event, 'fs79', 241)" class="i">consumer</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs102', 242)" onmouseover="showTip(event, 'fs102', 242)" class="f">Assign</span>)
  <span onmouseout="hideTip(event, 'fs79', 243)" onmouseover="showTip(event, 'fs79', 243)" class="i">consumer</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs103', 244)" onmouseover="showTip(event, 'fs103', 244)" class="i">OnMessage</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs52', 245)" onmouseover="showTip(event, 'fs52', 245)" class="f">Add</span>(<span onmouseout="hideTip(event, 'fs93', 246)" onmouseover="showTip(event, 'fs93', 246)" class="f">onMessage</span>)
  <span onmouseout="hideTip(event, 'fs79', 247)" onmouseover="showTip(event, 'fs79', 247)" class="i">consumer</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs104', 248)" onmouseover="showTip(event, 'fs104', 248)" class="f">Subscribe</span>(<span class="k">new</span> <span onmouseout="hideTip(event, 'fs99', 249)" onmouseover="showTip(event, 'fs99', 249)" class="i">Collections</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs100', 250)" onmouseover="showTip(event, 'fs100', 250)" class="i">Generic</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs101', 251)" onmouseover="showTip(event, 'fs101', 251)" class="t">List</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs7', 252)" onmouseover="showTip(event, 'fs7', 252)" class="t">string</span><span class="o">&gt;</span>([<span onmouseout="hideTip(event, 'fs78', 253)" onmouseover="showTip(event, 'fs78', 253)" class="i">topic</span>]))
  <span onmouseout="hideTip(event, 'fs79', 254)" onmouseover="showTip(event, 'fs79', 254)" class="i">consumer</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs105', 255)" onmouseover="showTip(event, 'fs105', 255)" class="f">Start</span>()
</code></pre>
<p>The above works quite well <em>assuming you process the message to completion within the callback</em>.</p>
<p>You may want to process larger batches of messages asynchronously, however.
To use a sequence instead, a blocking collection can buffer incoming messages as they're received.
A sequence generator yielding messages from this buffer is returned to the client:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs106', 256)" onmouseover="showTip(event, 'fs106', 256)" class="f">subscribeSeq</span> <span onmouseout="hideTip(event, 'fs63', 257)" onmouseover="showTip(event, 'fs63', 257)" class="i">brokerCsv</span> <span onmouseout="hideTip(event, 'fs64', 258)" onmouseover="showTip(event, 'fs64', 258)" class="i">group</span> <span onmouseout="hideTip(event, 'fs107', 259)" onmouseover="showTip(event, 'fs107', 259)" class="i">topic</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs108', 260)" onmouseover="showTip(event, 'fs108', 260)" class="t">seq</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs8', 261)" onmouseover="showTip(event, 'fs8', 261)" class="t">Partition</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs10', 262)" onmouseover="showTip(event, 'fs10', 262)" class="t">Offset</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs83', 263)" onmouseover="showTip(event, 'fs83', 263)" class="t">byte</span>[]<span class="o">&gt;</span> <span class="o">=</span>
</code></pre>
<p>More than <em>3000</em> messages in the buffer will hold+block the callback until the client has
consumed from the sequence.</p>
<pre class="fssnip highlighted"><code lang="fsharp">  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs109', 292)" onmouseover="showTip(event, 'fs109', 292)" class="i">buffer</span> <span class="o">=</span> <span class="n">3000</span>
  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs110', 293)" onmouseover="showTip(event, 'fs110', 293)" class="i">messages</span> <span class="o">=</span>
    <span class="k">new</span> <span onmouseout="hideTip(event, 'fs99', 294)" onmouseover="showTip(event, 'fs99', 294)" class="i">Collections</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs4', 295)" onmouseover="showTip(event, 'fs4', 295)" class="i">Concurrent</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs111', 296)" onmouseover="showTip(event, 'fs111', 296)" class="t">BlockingCollection</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs112', 297)" onmouseover="showTip(event, 'fs112', 297)" class="t">Message</span><span class="o">&gt;</span>(
      <span class="k">new</span> <span onmouseout="hideTip(event, 'fs99', 298)" onmouseover="showTip(event, 'fs99', 298)" class="i">Collections</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs4', 299)" onmouseover="showTip(event, 'fs4', 299)" class="i">Concurrent</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs113', 300)" onmouseover="showTip(event, 'fs113', 300)" class="t">ConcurrentQueue</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs112', 301)" onmouseover="showTip(event, 'fs112', 301)" class="t">Message</span><span class="o">&gt;</span>(), <span onmouseout="hideTip(event, 'fs109', 302)" onmouseover="showTip(event, 'fs109', 302)" class="i">buffer</span>)
  <span onmouseout="hideTip(event, 'fs79', 303)" onmouseover="showTip(event, 'fs79', 303)" class="i">consumer</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs103', 304)" onmouseover="showTip(event, 'fs103', 304)" class="i">OnMessage</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs52', 305)" onmouseover="showTip(event, 'fs52', 305)" class="f">Add</span>(<span onmouseout="hideTip(event, 'fs110', 306)" onmouseover="showTip(event, 'fs110', 306)" class="i">messages</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs114', 307)" onmouseover="showTip(event, 'fs114', 307)" class="f">Add</span>) 
  <span onmouseout="hideTip(event, 'fs79', 308)" onmouseover="showTip(event, 'fs79', 308)" class="i">consumer</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs104', 309)" onmouseover="showTip(event, 'fs104', 309)" class="f">Subscribe</span>(<span class="k">new</span> <span onmouseout="hideTip(event, 'fs99', 310)" onmouseover="showTip(event, 'fs99', 310)" class="i">Collections</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs100', 311)" onmouseover="showTip(event, 'fs100', 311)" class="i">Generic</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs101', 312)" onmouseover="showTip(event, 'fs101', 312)" class="t">List</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs7', 313)" onmouseover="showTip(event, 'fs7', 313)" class="t">string</span><span class="o">&gt;</span>([<span onmouseout="hideTip(event, 'fs107', 314)" onmouseover="showTip(event, 'fs107', 314)" class="i">topic</span>]))
  <span onmouseout="hideTip(event, 'fs79', 315)" onmouseover="showTip(event, 'fs79', 315)" class="i">consumer</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs105', 316)" onmouseover="showTip(event, 'fs105', 316)" class="f">Start</span>()
  
  <span onmouseout="hideTip(event, 'fs32', 317)" onmouseover="showTip(event, 'fs32', 317)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs115', 318)" onmouseover="showTip(event, 'fs115', 318)" class="f">initInfinite</span>(<span class="k">fun</span> _ <span class="k">-&gt;</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs116', 319)" onmouseover="showTip(event, 'fs116', 319)" class="i">message</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs110', 320)" onmouseover="showTip(event, 'fs110', 320)" class="i">messages</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs117', 321)" onmouseover="showTip(event, 'fs117', 321)" class="f">Take</span>()
    <span onmouseout="hideTip(event, 'fs116', 322)" onmouseover="showTip(event, 'fs116', 322)" class="i">message</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs118', 323)" onmouseover="showTip(event, 'fs118', 323)" class="i">Partition</span>, <span onmouseout="hideTip(event, 'fs116', 324)" onmouseover="showTip(event, 'fs116', 324)" class="i">message</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs119', 325)" onmouseover="showTip(event, 'fs119', 325)" class="i">Offset</span>, <span onmouseout="hideTip(event, 'fs116', 326)" onmouseover="showTip(event, 'fs116', 326)" class="i">message</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs120', 327)" onmouseover="showTip(event, 'fs120', 327)" class="i">Payload</span>)  <span class="c">// or AsyncSeq :)</span>
</code></pre>
<p>At this point, we make an important observation: the native client will autocommit offsets
acknowledging that a message in the buffer has been processed <em>even though it
may not have been dequeued</em>.  From RdKafka's point of view, the callback for
that message has completed!</p>
<p>This is when you'll want to manage offsets yourself.</p>
<h2>Manual Offsets</h2>
<p>For a given partition, we need to know which messages have started processing. These
are the <code>Active</code> messages that we do not yet want to commit.  When a message has completed
we move it to <code>Processed</code>.</p>
<p>It's possible that processing may complete out of order!  To account for this, the <code>Next</code>
offset to commit must be less than the oldest <code>Active</code> message.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs121', 328)" onmouseover="showTip(event, 'fs121', 328)" class="t">Offsets</span> <span class="o">=</span>
  { <span onmouseout="hideTip(event, 'fs122', 329)" onmouseover="showTip(event, 'fs122', 329)" class="i">Next</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs10', 330)" onmouseover="showTip(event, 'fs10', 330)" class="t">Offset</span> <span onmouseout="hideTip(event, 'fs123', 331)" onmouseover="showTip(event, 'fs123', 331)" class="t">option</span>       <span class="c">// the next offset to be committed</span>
    <span onmouseout="hideTip(event, 'fs124', 332)" onmouseover="showTip(event, 'fs124', 332)" class="i">Active</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs10', 333)" onmouseover="showTip(event, 'fs10', 333)" class="t">Offset</span> <span onmouseout="hideTip(event, 'fs125', 334)" onmouseover="showTip(event, 'fs125', 334)" class="t">list</span>       <span class="c">// offsets of active messages (started processing)</span>
    <span onmouseout="hideTip(event, 'fs126', 335)" onmouseover="showTip(event, 'fs126', 335)" class="i">Processed</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs10', 336)" onmouseover="showTip(event, 'fs10', 336)" class="t">Offset</span> <span onmouseout="hideTip(event, 'fs125', 337)" onmouseover="showTip(event, 'fs125', 337)" class="t">list</span> }  <span class="c">// offsets of processed messages newer than (&gt;) any</span>
                               <span class="c">// active message, e.g.:</span>
                               <span class="c">//   still working on 4L, but 5L &amp; 6L are processed</span>
</code></pre>
<p>In the following module:</p>
<ul>
<li><code>start</code> adds a message to the <code>Active</code> set</li>
<li><code>finish</code> moves a message from the <code>Active</code> set to <code>Processed</code></li>
<li><code>update</code> adjusts the <code>Next</code> offset to commit (based on any changes above)</li>
</ul>
<pre class="fssnip highlighted"><code lang="fsharp">[&lt;<span onmouseout="hideTip(event, 'fs127', 338)" onmouseover="showTip(event, 'fs127', 338)" class="t">CompilationRepresentation</span>(<span onmouseout="hideTip(event, 'fs128', 339)" onmouseover="showTip(event, 'fs128', 339)" class="t">CompilationRepresentationFlags</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs129', 340)" onmouseover="showTip(event, 'fs129', 340)" class="i">ModuleSuffix</span>)&gt;]
<span class="k">module</span> <span onmouseout="hideTip(event, 'fs121', 341)" onmouseover="showTip(event, 'fs121', 341)" class="t">Offsets</span> <span class="o">=</span>
  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs130', 342)" onmouseover="showTip(event, 'fs130', 342)" class="i">empty</span> <span class="o">=</span> { <span class="i">Next</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs131', 343)" onmouseover="showTip(event, 'fs131', 343)" class="p">None</span>; <span class="i">Processed</span><span class="o">=</span>[]; <span class="i">Active</span><span class="o">=</span>[] }

  <span class="k">let</span> <span class="k">private</span> <span onmouseout="hideTip(event, 'fs132', 344)" onmouseover="showTip(event, 'fs132', 344)" class="f">update</span> <span class="o">=</span> <span class="k">function</span>
    | { <span class="i">Processed</span><span class="o">=</span>[] } <span class="k">as</span> <span onmouseout="hideTip(event, 'fs133', 345)" onmouseover="showTip(event, 'fs133', 345)" class="i">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs133', 346)" onmouseover="showTip(event, 'fs133', 346)" class="i">x</span>
    | { <span class="i">Active</span><span class="o">=</span>[] } <span class="k">as</span> <span onmouseout="hideTip(event, 'fs133', 347)" onmouseover="showTip(event, 'fs133', 347)" class="i">x</span> <span class="k">-&gt;</span> { <span onmouseout="hideTip(event, 'fs133', 348)" onmouseover="showTip(event, 'fs133', 348)" class="i">x</span> <span class="k">with</span> <span class="i">Processed</span><span class="o">=</span>[]; <span class="i">Next</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs19', 349)" onmouseover="showTip(event, 'fs19', 349)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs134', 350)" onmouseover="showTip(event, 'fs134', 350)" class="f">max</span> <span onmouseout="hideTip(event, 'fs133', 351)" onmouseover="showTip(event, 'fs133', 351)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs126', 352)" onmouseover="showTip(event, 'fs126', 352)" class="i">Processed</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs135', 353)" onmouseover="showTip(event, 'fs135', 353)" class="p">Some</span> }
    | <span onmouseout="hideTip(event, 'fs133', 354)" onmouseover="showTip(event, 'fs133', 354)" class="i">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs133', 355)" onmouseover="showTip(event, 'fs133', 355)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs126', 356)" onmouseover="showTip(event, 'fs126', 356)" class="i">Processed</span>
           <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs19', 357)" onmouseover="showTip(event, 'fs19', 357)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs136', 358)" onmouseover="showTip(event, 'fs136', 358)" class="f">partition</span> ((<span class="o">&gt;</span><span class="o">=</span>) (<span onmouseout="hideTip(event, 'fs19', 359)" onmouseover="showTip(event, 'fs19', 359)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs137', 360)" onmouseover="showTip(event, 'fs137', 360)" class="f">min</span> <span onmouseout="hideTip(event, 'fs133', 361)" onmouseover="showTip(event, 'fs133', 361)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs124', 362)" onmouseover="showTip(event, 'fs124', 362)" class="i">Active</span>))
           <span class="o">|&gt;</span> <span class="k">function</span> | [], _ <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs133', 363)" onmouseover="showTip(event, 'fs133', 363)" class="i">x</span>
                       | <span onmouseout="hideTip(event, 'fs138', 364)" onmouseover="showTip(event, 'fs138', 364)" class="i">c</span>, <span onmouseout="hideTip(event, 'fs139', 365)" onmouseover="showTip(event, 'fs139', 365)" class="i">p</span> <span class="k">-&gt;</span> { <span onmouseout="hideTip(event, 'fs133', 366)" onmouseover="showTip(event, 'fs133', 366)" class="i">x</span> <span class="k">with</span> <span class="i">Processed</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs139', 367)" onmouseover="showTip(event, 'fs139', 367)" class="i">p</span>; <span class="i">Next</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs19', 368)" onmouseover="showTip(event, 'fs19', 368)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs134', 369)" onmouseover="showTip(event, 'fs134', 369)" class="f">max</span> <span onmouseout="hideTip(event, 'fs138', 370)" onmouseover="showTip(event, 'fs138', 370)" class="i">c</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs135', 371)" onmouseover="showTip(event, 'fs135', 371)" class="p">Some</span> }
  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs140', 372)" onmouseover="showTip(event, 'fs140', 372)" class="f">start</span>  (<span onmouseout="hideTip(event, 'fs141', 373)" onmouseover="showTip(event, 'fs141', 373)" class="i">x</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs10', 374)" onmouseover="showTip(event, 'fs10', 374)" class="t">Offset</span>) (<span onmouseout="hideTip(event, 'fs142', 375)" onmouseover="showTip(event, 'fs142', 375)" class="i">xs</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs121', 376)" onmouseover="showTip(event, 'fs121', 376)" class="t">Offsets</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs132', 377)" onmouseover="showTip(event, 'fs132', 377)" class="f">update</span> { <span onmouseout="hideTip(event, 'fs142', 378)" onmouseover="showTip(event, 'fs142', 378)" class="i">xs</span> <span class="k">with</span> <span class="i">Active</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs141', 379)" onmouseover="showTip(event, 'fs141', 379)" class="i">x</span> <span class="o">::</span> <span onmouseout="hideTip(event, 'fs142', 380)" onmouseover="showTip(event, 'fs142', 380)" class="i">xs</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs124', 381)" onmouseover="showTip(event, 'fs124', 381)" class="i">Active</span> }
  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs143', 382)" onmouseover="showTip(event, 'fs143', 382)" class="f">finish</span> (<span onmouseout="hideTip(event, 'fs141', 383)" onmouseover="showTip(event, 'fs141', 383)" class="i">x</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs10', 384)" onmouseover="showTip(event, 'fs10', 384)" class="t">Offset</span>) (<span onmouseout="hideTip(event, 'fs142', 385)" onmouseover="showTip(event, 'fs142', 385)" class="i">xs</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs121', 386)" onmouseover="showTip(event, 'fs121', 386)" class="t">Offsets</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs132', 387)" onmouseover="showTip(event, 'fs132', 387)" class="f">update</span> { <span onmouseout="hideTip(event, 'fs142', 388)" onmouseover="showTip(event, 'fs142', 388)" class="i">xs</span> <span class="k">with</span> <span class="i">Active</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs19', 389)" onmouseover="showTip(event, 'fs19', 389)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs144', 390)" onmouseover="showTip(event, 'fs144', 390)" class="f">filter</span> ((<span class="o">&lt;&gt;</span>) <span onmouseout="hideTip(event, 'fs141', 391)" onmouseover="showTip(event, 'fs141', 391)" class="i">x</span>) <span onmouseout="hideTip(event, 'fs142', 392)" onmouseover="showTip(event, 'fs142', 392)" class="i">xs</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs124', 393)" onmouseover="showTip(event, 'fs124', 393)" class="i">Active</span>
                                                        <span class="i">Processed</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs141', 394)" onmouseover="showTip(event, 'fs141', 394)" class="i">x</span> <span class="o">::</span> <span onmouseout="hideTip(event, 'fs142', 395)" onmouseover="showTip(event, 'fs142', 395)" class="i">xs</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs126', 396)" onmouseover="showTip(event, 'fs126', 396)" class="i">Processed</span> }
</code></pre>
<p>Since the <code>Offsets</code> above apply to an individual partition, we want to be able to track
all <em>current</em> partitions.  This follows the same lifecycle we've seen so far:</p>
<ol>
<li>a partition is <em>assigned</em> to us</li>
<li>a message <em>starts</em> processing</li>
<li>a message <em>finishes</em> processing</li>
<li>a partition may be <em>revoked</em> (and assigned to another instance)</li>
</ol>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs145', 397)" onmouseover="showTip(event, 'fs145', 397)" class="t">Partitions</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs146', 398)" onmouseover="showTip(event, 'fs146', 398)" class="t">Map</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs8', 399)" onmouseover="showTip(event, 'fs8', 399)" class="t">Partition</span>, <span onmouseout="hideTip(event, 'fs121', 400)" onmouseover="showTip(event, 'fs121', 400)" class="t">Offsets</span><span class="o">&gt;</span>

[&lt;<span onmouseout="hideTip(event, 'fs127', 401)" onmouseover="showTip(event, 'fs127', 401)" class="t">CompilationRepresentation</span>(<span onmouseout="hideTip(event, 'fs128', 402)" onmouseover="showTip(event, 'fs128', 402)" class="t">CompilationRepresentationFlags</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs129', 403)" onmouseover="showTip(event, 'fs129', 403)" class="i">ModuleSuffix</span>)&gt;]
<span class="k">module</span> <span onmouseout="hideTip(event, 'fs145', 404)" onmouseover="showTip(event, 'fs145', 404)" class="t">Partitions</span> <span class="o">=</span>  
  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs147', 405)" onmouseover="showTip(event, 'fs147', 405)" class="f">assign</span> (<span onmouseout="hideTip(event, 'fs148', 406)" onmouseover="showTip(event, 'fs148', 406)" class="i">p</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs8', 407)" onmouseover="showTip(event, 'fs8', 407)" class="t">Partition</span>) (<span onmouseout="hideTip(event, 'fs149', 408)" onmouseover="showTip(event, 'fs149', 408)" class="i">xs</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs145', 409)" onmouseover="showTip(event, 'fs145', 409)" class="t">Partitions</span>) <span class="o">:</span> <span onmouseout="hideTip(event, 'fs145', 410)" onmouseover="showTip(event, 'fs145', 410)" class="t">Partitions</span> <span class="o">=</span>
    <span class="k">match</span> <span onmouseout="hideTip(event, 'fs146', 411)" onmouseover="showTip(event, 'fs146', 411)" class="t">Map</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs150', 412)" onmouseover="showTip(event, 'fs150', 412)" class="f">tryFind</span> <span onmouseout="hideTip(event, 'fs148', 413)" onmouseover="showTip(event, 'fs148', 413)" class="i">p</span> <span onmouseout="hideTip(event, 'fs149', 414)" onmouseover="showTip(event, 'fs149', 414)" class="i">xs</span> <span class="k">with</span>
    | <span onmouseout="hideTip(event, 'fs135', 415)" onmouseover="showTip(event, 'fs135', 415)" class="p">Some</span> _ <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs149', 416)" onmouseover="showTip(event, 'fs149', 416)" class="i">xs</span>
    | <span onmouseout="hideTip(event, 'fs131', 417)" onmouseover="showTip(event, 'fs131', 417)" class="p">None</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs146', 418)" onmouseover="showTip(event, 'fs146', 418)" class="t">Map</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs151', 419)" onmouseover="showTip(event, 'fs151', 419)" class="f">add</span> <span onmouseout="hideTip(event, 'fs148', 420)" onmouseover="showTip(event, 'fs148', 420)" class="i">p</span> <span onmouseout="hideTip(event, 'fs121', 421)" onmouseover="showTip(event, 'fs121', 421)" class="t">Offsets</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs130', 422)" onmouseover="showTip(event, 'fs130', 422)" class="i">empty</span> <span onmouseout="hideTip(event, 'fs149', 423)" onmouseover="showTip(event, 'fs149', 423)" class="i">xs</span>

  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs152', 424)" onmouseover="showTip(event, 'fs152', 424)" class="f">start</span> (<span onmouseout="hideTip(event, 'fs148', 425)" onmouseover="showTip(event, 'fs148', 425)" class="i">p</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs8', 426)" onmouseover="showTip(event, 'fs8', 426)" class="t">Partition</span>, <span onmouseout="hideTip(event, 'fs153', 427)" onmouseover="showTip(event, 'fs153', 427)" class="i">o</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs10', 428)" onmouseover="showTip(event, 'fs10', 428)" class="t">Offset</span>) (<span onmouseout="hideTip(event, 'fs149', 429)" onmouseover="showTip(event, 'fs149', 429)" class="i">xs</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs145', 430)" onmouseover="showTip(event, 'fs145', 430)" class="t">Partitions</span>) <span class="o">:</span> <span onmouseout="hideTip(event, 'fs145', 431)" onmouseover="showTip(event, 'fs145', 431)" class="t">Partitions</span> <span class="o">=</span>
    <span class="k">match</span> <span onmouseout="hideTip(event, 'fs146', 432)" onmouseover="showTip(event, 'fs146', 432)" class="t">Map</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs150', 433)" onmouseover="showTip(event, 'fs150', 433)" class="f">tryFind</span> <span onmouseout="hideTip(event, 'fs148', 434)" onmouseover="showTip(event, 'fs148', 434)" class="i">p</span> <span onmouseout="hideTip(event, 'fs149', 435)" onmouseover="showTip(event, 'fs149', 435)" class="i">xs</span> <span class="k">with</span> 
    | <span onmouseout="hideTip(event, 'fs135', 436)" onmouseover="showTip(event, 'fs135', 436)" class="p">Some</span> <span onmouseout="hideTip(event, 'fs154', 437)" onmouseover="showTip(event, 'fs154', 437)" class="i">offsets</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs146', 438)" onmouseover="showTip(event, 'fs146', 438)" class="t">Map</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs151', 439)" onmouseover="showTip(event, 'fs151', 439)" class="f">add</span> <span onmouseout="hideTip(event, 'fs148', 440)" onmouseover="showTip(event, 'fs148', 440)" class="i">p</span> (<span onmouseout="hideTip(event, 'fs121', 441)" onmouseover="showTip(event, 'fs121', 441)" class="t">Offsets</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs140', 442)" onmouseover="showTip(event, 'fs140', 442)" class="f">start</span> <span onmouseout="hideTip(event, 'fs153', 443)" onmouseover="showTip(event, 'fs153', 443)" class="i">o</span> <span onmouseout="hideTip(event, 'fs154', 444)" onmouseover="showTip(event, 'fs154', 444)" class="i">offsets</span>) <span onmouseout="hideTip(event, 'fs149', 445)" onmouseover="showTip(event, 'fs149', 445)" class="i">xs</span>
    | <span onmouseout="hideTip(event, 'fs131', 446)" onmouseover="showTip(event, 'fs131', 446)" class="p">None</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs149', 447)" onmouseover="showTip(event, 'fs149', 447)" class="i">xs</span>

  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs155', 448)" onmouseover="showTip(event, 'fs155', 448)" class="f">finish</span> (<span onmouseout="hideTip(event, 'fs148', 449)" onmouseover="showTip(event, 'fs148', 449)" class="i">p</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs8', 450)" onmouseover="showTip(event, 'fs8', 450)" class="t">Partition</span>, <span onmouseout="hideTip(event, 'fs153', 451)" onmouseover="showTip(event, 'fs153', 451)" class="i">o</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs10', 452)" onmouseover="showTip(event, 'fs10', 452)" class="t">Offset</span>) (<span onmouseout="hideTip(event, 'fs149', 453)" onmouseover="showTip(event, 'fs149', 453)" class="i">xs</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs145', 454)" onmouseover="showTip(event, 'fs145', 454)" class="t">Partitions</span>) <span class="o">:</span> <span onmouseout="hideTip(event, 'fs145', 455)" onmouseover="showTip(event, 'fs145', 455)" class="t">Partitions</span> <span class="o">=</span>
    <span class="k">match</span> <span onmouseout="hideTip(event, 'fs146', 456)" onmouseover="showTip(event, 'fs146', 456)" class="t">Map</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs150', 457)" onmouseover="showTip(event, 'fs150', 457)" class="f">tryFind</span> <span onmouseout="hideTip(event, 'fs148', 458)" onmouseover="showTip(event, 'fs148', 458)" class="i">p</span> <span onmouseout="hideTip(event, 'fs149', 459)" onmouseover="showTip(event, 'fs149', 459)" class="i">xs</span> <span class="k">with</span>
    | <span onmouseout="hideTip(event, 'fs135', 460)" onmouseover="showTip(event, 'fs135', 460)" class="p">Some</span> <span onmouseout="hideTip(event, 'fs154', 461)" onmouseover="showTip(event, 'fs154', 461)" class="i">offsets</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs146', 462)" onmouseover="showTip(event, 'fs146', 462)" class="t">Map</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs151', 463)" onmouseover="showTip(event, 'fs151', 463)" class="f">add</span> <span onmouseout="hideTip(event, 'fs148', 464)" onmouseover="showTip(event, 'fs148', 464)" class="i">p</span> (<span onmouseout="hideTip(event, 'fs121', 465)" onmouseover="showTip(event, 'fs121', 465)" class="t">Offsets</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs143', 466)" onmouseover="showTip(event, 'fs143', 466)" class="f">finish</span> <span onmouseout="hideTip(event, 'fs153', 467)" onmouseover="showTip(event, 'fs153', 467)" class="i">o</span> <span onmouseout="hideTip(event, 'fs154', 468)" onmouseover="showTip(event, 'fs154', 468)" class="i">offsets</span>) <span onmouseout="hideTip(event, 'fs149', 469)" onmouseover="showTip(event, 'fs149', 469)" class="i">xs</span>
    | <span onmouseout="hideTip(event, 'fs131', 470)" onmouseover="showTip(event, 'fs131', 470)" class="p">None</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs149', 471)" onmouseover="showTip(event, 'fs149', 471)" class="i">xs</span>

  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs156', 472)" onmouseover="showTip(event, 'fs156', 472)" class="f">revoke</span> (<span onmouseout="hideTip(event, 'fs148', 473)" onmouseover="showTip(event, 'fs148', 473)" class="i">p</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs8', 474)" onmouseover="showTip(event, 'fs8', 474)" class="t">Partition</span>) (<span onmouseout="hideTip(event, 'fs149', 475)" onmouseover="showTip(event, 'fs149', 475)" class="i">xs</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs145', 476)" onmouseover="showTip(event, 'fs145', 476)" class="t">Partitions</span>) <span class="o">:</span> <span onmouseout="hideTip(event, 'fs145', 477)" onmouseover="showTip(event, 'fs145', 477)" class="t">Partitions</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs146', 478)" onmouseover="showTip(event, 'fs146', 478)" class="t">Map</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs157', 479)" onmouseover="showTip(event, 'fs157', 479)" class="f">remove</span> <span onmouseout="hideTip(event, 'fs148', 480)" onmouseover="showTip(event, 'fs148', 480)" class="i">p</span> <span onmouseout="hideTip(event, 'fs149', 481)" onmouseover="showTip(event, 'fs149', 481)" class="i">xs</span>
</code></pre>
<p>Finally, we want the next offset to commit for each partition assigned to us.
Our client can then commit a checkpoint to record completion of all messages up to this point.</p>
<pre class="fssnip highlighted"><code lang="fsharp">  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs158', 482)" onmouseover="showTip(event, 'fs158', 482)" class="f">checkpoint</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs145', 483)" onmouseover="showTip(event, 'fs145', 483)" class="t">Partitions</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs19', 484)" onmouseover="showTip(event, 'fs19', 484)" class="t">List</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs8', 485)" onmouseover="showTip(event, 'fs8', 485)" class="t">Partition</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs10', 486)" onmouseover="showTip(event, 'fs10', 486)" class="t">Offset</span><span class="o">&gt;</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs146', 487)" onmouseover="showTip(event, 'fs146', 487)" class="t">Map</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs159', 488)" onmouseover="showTip(event, 'fs159', 488)" class="f">toList</span> <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs19', 489)" onmouseover="showTip(event, 'fs19', 489)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs160', 490)" onmouseover="showTip(event, 'fs160', 490)" class="f">choose</span> (<span class="k">fun</span> (<span onmouseout="hideTip(event, 'fs148', 491)" onmouseover="showTip(event, 'fs148', 491)" class="i">p</span>,<span onmouseout="hideTip(event, 'fs161', 492)" onmouseover="showTip(event, 'fs161', 492)" class="i">o</span>) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs161', 493)" onmouseover="showTip(event, 'fs161', 493)" class="i">o</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs122', 494)" onmouseover="showTip(event, 'fs122', 494)" class="i">Next</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs162', 495)" onmouseover="showTip(event, 'fs162', 495)" class="t">Option</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs163', 496)" onmouseover="showTip(event, 'fs163', 496)" class="f">map</span>(<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs153', 497)" onmouseover="showTip(event, 'fs153', 497)" class="i">o</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs148', 498)" onmouseover="showTip(event, 'fs148', 498)" class="i">p</span>,<span class="n">1L</span><span class="o">+</span><span onmouseout="hideTip(event, 'fs153', 499)" onmouseover="showTip(event, 'fs153', 499)" class="i">o</span>))
</code></pre>
<h3>Integrating &amp; Committing Offsets</h3>
<p>This example uses an F# mailbox processor to aggregate our progress from multiple threads.
There are several ways to solve this problem! This particular solution can play nicely with
asynchronous workflows and is fairly concise.</p>
<p>The actor observes the following:</p>
<ol>
<li>processing <em>started</em> or <em>completed</em> on a message at <code>Offset</code> of <code>Partition</code></li>
<li>active <code>Partitions</code> have been assigned to us, or revoked from us (i.e. assigned to another consumer in our group)</li>
</ol>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs164', 500)" onmouseover="showTip(event, 'fs164', 500)" class="t">OffsetMonitor</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs165', 501)" onmouseover="showTip(event, 'fs165', 501)" class="t">OffsetMonitorMessage</span><span class="k">-&gt;</span><span onmouseout="hideTip(event, 'fs166', 502)" onmouseover="showTip(event, 'fs166', 502)" class="t">unit</span>
<span class="k">and</span> <span onmouseout="hideTip(event, 'fs165', 503)" onmouseover="showTip(event, 'fs165', 503)" class="t">OffsetMonitorMessage</span> <span class="o">=</span>
  | <span onmouseout="hideTip(event, 'fs167', 504)" onmouseover="showTip(event, 'fs167', 504)" class="p">Start</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs8', 505)" onmouseover="showTip(event, 'fs8', 505)" class="t">Partition</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs10', 506)" onmouseover="showTip(event, 'fs10', 506)" class="t">Offset</span> | <span onmouseout="hideTip(event, 'fs168', 507)" onmouseover="showTip(event, 'fs168', 507)" class="p">Finish</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs8', 508)" onmouseover="showTip(event, 'fs8', 508)" class="t">Partition</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs10', 509)" onmouseover="showTip(event, 'fs10', 509)" class="t">Offset</span> <span class="c">// (1)</span>
  | <span onmouseout="hideTip(event, 'fs169', 510)" onmouseover="showTip(event, 'fs169', 510)" class="p">Assign</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs8', 511)" onmouseover="showTip(event, 'fs8', 511)" class="t">Partition</span> <span onmouseout="hideTip(event, 'fs125', 512)" onmouseover="showTip(event, 'fs125', 512)" class="t">list</span>    | <span onmouseout="hideTip(event, 'fs170', 513)" onmouseover="showTip(event, 'fs170', 513)" class="p">Revoke</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs8', 514)" onmouseover="showTip(event, 'fs8', 514)" class="t">Partition</span> <span onmouseout="hideTip(event, 'fs125', 515)" onmouseover="showTip(event, 'fs125', 515)" class="t">list</span>     <span class="c">// (2)</span>

[&lt;<span onmouseout="hideTip(event, 'fs127', 516)" onmouseover="showTip(event, 'fs127', 516)" class="t">CompilationRepresentation</span>(<span onmouseout="hideTip(event, 'fs128', 517)" onmouseover="showTip(event, 'fs128', 517)" class="t">CompilationRepresentationFlags</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs129', 518)" onmouseover="showTip(event, 'fs129', 518)" class="i">ModuleSuffix</span>)&gt;]
<span class="k">module</span> <span onmouseout="hideTip(event, 'fs164', 519)" onmouseover="showTip(event, 'fs164', 519)" class="t">OffsetMonitor</span> <span class="o">=</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs171', 520)" onmouseover="showTip(event, 'fs171', 520)" class="f">assign</span> <span onmouseout="hideTip(event, 'fs172', 521)" onmouseover="showTip(event, 'fs172', 521)" class="f">m</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs19', 522)" onmouseover="showTip(event, 'fs19', 522)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs94', 523)" onmouseover="showTip(event, 'fs94', 523)" class="f">map</span> (<span class="k">fun</span> (_,<span onmouseout="hideTip(event, 'fs148', 524)" onmouseover="showTip(event, 'fs148', 524)" class="i">p</span>,_) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs148', 525)" onmouseover="showTip(event, 'fs148', 525)" class="i">p</span>) <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs169', 526)" onmouseover="showTip(event, 'fs169', 526)" class="p">Assign</span> <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs172', 527)" onmouseover="showTip(event, 'fs172', 527)" class="f">m</span> 
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs173', 528)" onmouseover="showTip(event, 'fs173', 528)" class="f">revoke</span> <span onmouseout="hideTip(event, 'fs172', 529)" onmouseover="showTip(event, 'fs172', 529)" class="f">m</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs19', 530)" onmouseover="showTip(event, 'fs19', 530)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs94', 531)" onmouseover="showTip(event, 'fs94', 531)" class="f">map</span> (<span class="k">fun</span> (_,<span onmouseout="hideTip(event, 'fs148', 532)" onmouseover="showTip(event, 'fs148', 532)" class="i">p</span>,_) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs148', 533)" onmouseover="showTip(event, 'fs148', 533)" class="i">p</span>) <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs170', 534)" onmouseover="showTip(event, 'fs170', 534)" class="p">Revoke</span> <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs172', 535)" onmouseover="showTip(event, 'fs172', 535)" class="f">m</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs174', 536)" onmouseover="showTip(event, 'fs174', 536)" class="f">start</span>  <span onmouseout="hideTip(event, 'fs172', 537)" onmouseover="showTip(event, 'fs172', 537)" class="f">m</span> (<span onmouseout="hideTip(event, 'fs175', 538)" onmouseover="showTip(event, 'fs175', 538)" class="i">x</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs112', 539)" onmouseover="showTip(event, 'fs112', 539)" class="t">Message</span>) <span class="o">=</span> (<span onmouseout="hideTip(event, 'fs175', 540)" onmouseover="showTip(event, 'fs175', 540)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs118', 541)" onmouseover="showTip(event, 'fs118', 541)" class="i">Partition</span>, <span onmouseout="hideTip(event, 'fs175', 542)" onmouseover="showTip(event, 'fs175', 542)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs119', 543)" onmouseover="showTip(event, 'fs119', 543)" class="i">Offset</span>) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs167', 544)" onmouseover="showTip(event, 'fs167', 544)" class="p">Start</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs172', 545)" onmouseover="showTip(event, 'fs172', 545)" class="f">m</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs176', 546)" onmouseover="showTip(event, 'fs176', 546)" class="f">finish</span> <span onmouseout="hideTip(event, 'fs172', 547)" onmouseover="showTip(event, 'fs172', 547)" class="f">m</span> (<span onmouseout="hideTip(event, 'fs175', 548)" onmouseover="showTip(event, 'fs175', 548)" class="i">x</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs112', 549)" onmouseover="showTip(event, 'fs112', 549)" class="t">Message</span>) <span class="o">=</span> (<span onmouseout="hideTip(event, 'fs175', 550)" onmouseover="showTip(event, 'fs175', 550)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs118', 551)" onmouseover="showTip(event, 'fs118', 551)" class="i">Partition</span>, <span onmouseout="hideTip(event, 'fs175', 552)" onmouseover="showTip(event, 'fs175', 552)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs119', 553)" onmouseover="showTip(event, 'fs119', 553)" class="i">Offset</span>) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs168', 554)" onmouseover="showTip(event, 'fs168', 554)" class="p">Finish</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs172', 555)" onmouseover="showTip(event, 'fs172', 555)" class="f">m</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs177', 556)" onmouseover="showTip(event, 'fs177', 556)" class="f">create</span> (<span onmouseout="hideTip(event, 'fs79', 557)" onmouseover="showTip(event, 'fs79', 557)" class="i">consumer</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs50', 558)" onmouseover="showTip(event, 'fs50', 558)" class="t">EventConsumer</span>) (<span onmouseout="hideTip(event, 'fs78', 559)" onmouseover="showTip(event, 'fs78', 559)" class="i">topic</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs6', 560)" onmouseover="showTip(event, 'fs6', 560)" class="t">Topic</span>) <span class="o">=</span>

      <span class="k">let</span> <span onmouseout="hideTip(event, 'fs178', 561)" onmouseover="showTip(event, 'fs178', 561)" class="f">integrate</span> <span class="o">=</span> <span class="k">function</span>
        | <span onmouseout="hideTip(event, 'fs167', 562)" onmouseover="showTip(event, 'fs167', 562)" class="p">Start</span>  (<span onmouseout="hideTip(event, 'fs148', 563)" onmouseover="showTip(event, 'fs148', 563)" class="i">p</span>,<span onmouseout="hideTip(event, 'fs153', 564)" onmouseover="showTip(event, 'fs153', 564)" class="i">o</span>) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs179', 565)" onmouseover="showTip(event, 'fs179', 565)" class="t">Partitions</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs152', 566)" onmouseover="showTip(event, 'fs152', 566)" class="f">start</span>  (<span onmouseout="hideTip(event, 'fs148', 567)" onmouseover="showTip(event, 'fs148', 567)" class="i">p</span>,<span onmouseout="hideTip(event, 'fs153', 568)" onmouseover="showTip(event, 'fs153', 568)" class="i">o</span>)
        | <span onmouseout="hideTip(event, 'fs168', 569)" onmouseover="showTip(event, 'fs168', 569)" class="p">Finish</span> (<span onmouseout="hideTip(event, 'fs148', 570)" onmouseover="showTip(event, 'fs148', 570)" class="i">p</span>,<span onmouseout="hideTip(event, 'fs153', 571)" onmouseover="showTip(event, 'fs153', 571)" class="i">o</span>) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs179', 572)" onmouseover="showTip(event, 'fs179', 572)" class="t">Partitions</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs155', 573)" onmouseover="showTip(event, 'fs155', 573)" class="f">finish</span> (<span onmouseout="hideTip(event, 'fs148', 574)" onmouseover="showTip(event, 'fs148', 574)" class="i">p</span>,<span onmouseout="hideTip(event, 'fs153', 575)" onmouseover="showTip(event, 'fs153', 575)" class="i">o</span>)
        | <span onmouseout="hideTip(event, 'fs169', 576)" onmouseover="showTip(event, 'fs169', 576)" class="p">Assign</span> (<span onmouseout="hideTip(event, 'fs180', 577)" onmouseover="showTip(event, 'fs180', 577)" class="i">ps</span>)  <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs19', 578)" onmouseover="showTip(event, 'fs19', 578)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs181', 579)" onmouseover="showTip(event, 'fs181', 579)" class="f">foldBack</span> <span onmouseout="hideTip(event, 'fs179', 580)" onmouseover="showTip(event, 'fs179', 580)" class="t">Partitions</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs147', 581)" onmouseover="showTip(event, 'fs147', 581)" class="f">assign</span> (<span onmouseout="hideTip(event, 'fs180', 582)" onmouseover="showTip(event, 'fs180', 582)" class="i">ps</span>)
        | <span onmouseout="hideTip(event, 'fs170', 583)" onmouseover="showTip(event, 'fs170', 583)" class="p">Revoke</span> (<span onmouseout="hideTip(event, 'fs180', 584)" onmouseover="showTip(event, 'fs180', 584)" class="i">ps</span>)  <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs19', 585)" onmouseover="showTip(event, 'fs19', 585)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs181', 586)" onmouseover="showTip(event, 'fs181', 586)" class="f">foldBack</span> <span onmouseout="hideTip(event, 'fs179', 587)" onmouseover="showTip(event, 'fs179', 587)" class="t">Partitions</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs156', 588)" onmouseover="showTip(event, 'fs156', 588)" class="f">revoke</span> (<span onmouseout="hideTip(event, 'fs180', 589)" onmouseover="showTip(event, 'fs180', 589)" class="i">ps</span>)
</code></pre>
<p>Here, every 45 seconds our offset monitor will commit outstanding checkpoints. Note that a
Kafka cluster may reassign your partitions if you wait too long to report progress.</p>
<pre class="fssnip highlighted"><code lang="fsharp">      <span onmouseout="hideTip(event, 'fs182', 590)" onmouseover="showTip(event, 'fs182', 590)" class="t">MailboxProcessor</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs165', 591)" onmouseover="showTip(event, 'fs165', 591)" class="t">OffsetMonitorMessage</span><span class="o">&gt;</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs167', 592)" onmouseover="showTip(event, 'fs167', 592)" class="f">Start</span>(<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs183', 593)" onmouseover="showTip(event, 'fs183', 593)" class="i">inbox</span> <span class="k">-&gt;</span>
        <span class="k">let</span> <span class="k">rec</span> <span onmouseout="hideTip(event, 'fs184', 594)" onmouseover="showTip(event, 'fs184', 594)" class="f">loop</span>(<span onmouseout="hideTip(event, 'fs185', 595)" onmouseover="showTip(event, 'fs185', 595)" class="i">watch</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs186', 596)" onmouseover="showTip(event, 'fs186', 596)" class="t">Stopwatch</span>, <span onmouseout="hideTip(event, 'fs187', 597)" onmouseover="showTip(event, 'fs187', 597)" class="i">partitions</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs179', 598)" onmouseover="showTip(event, 'fs179', 598)" class="t">Partitions</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs85', 599)" onmouseover="showTip(event, 'fs85', 599)" class="i">async</span> {
            <span class="k">if</span> <span onmouseout="hideTip(event, 'fs185', 600)" onmouseover="showTip(event, 'fs185', 600)" class="i">watch</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs188', 601)" onmouseover="showTip(event, 'fs188', 601)" class="i">Elapsed</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs189', 602)" onmouseover="showTip(event, 'fs189', 602)" class="i">TotalSeconds</span> <span class="o">&gt;</span> <span class="n">45.</span> <span class="k">then</span>
              <span class="k">let!</span> <span onmouseout="hideTip(event, 'fs190', 603)" onmouseover="showTip(event, 'fs190', 603)" class="i">result</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs179', 604)" onmouseover="showTip(event, 'fs179', 604)" class="t">Partitions</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs158', 605)" onmouseover="showTip(event, 'fs158', 605)" class="f">checkpoint</span> <span onmouseout="hideTip(event, 'fs187', 606)" onmouseover="showTip(event, 'fs187', 606)" class="i">partitions</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs19', 607)" onmouseover="showTip(event, 'fs19', 607)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs94', 608)" onmouseover="showTip(event, 'fs94', 608)" class="f">map</span> (<span class="k">fun</span> (<span onmouseout="hideTip(event, 'fs148', 609)" onmouseover="showTip(event, 'fs148', 609)" class="i">p</span>,<span onmouseout="hideTip(event, 'fs153', 610)" onmouseover="showTip(event, 'fs153', 610)" class="i">o</span>) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs27', 611)" onmouseover="showTip(event, 'fs27', 611)" class="t">TopicPartitionOffset</span>(<span onmouseout="hideTip(event, 'fs78', 612)" onmouseover="showTip(event, 'fs78', 612)" class="i">topic</span>,<span onmouseout="hideTip(event, 'fs148', 613)" onmouseover="showTip(event, 'fs148', 613)" class="i">p</span>,<span onmouseout="hideTip(event, 'fs153', 614)" onmouseover="showTip(event, 'fs153', 614)" class="i">o</span>))
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs99', 615)" onmouseover="showTip(event, 'fs99', 615)" class="i">Collections</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs100', 616)" onmouseover="showTip(event, 'fs100', 616)" class="i">Generic</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs101', 617)" onmouseover="showTip(event, 'fs101', 617)" class="t">List</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs79', 618)" onmouseover="showTip(event, 'fs79', 618)" class="i">consumer</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs191', 619)" onmouseover="showTip(event, 'fs191', 619)" class="f">Commit</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs87', 620)" onmouseover="showTip(event, 'fs87', 620)" class="t">Async</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs88', 621)" onmouseover="showTip(event, 'fs88', 621)" class="f">AwaitTask</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs87', 622)" onmouseover="showTip(event, 'fs87', 622)" class="t">Async</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs192', 623)" onmouseover="showTip(event, 'fs192', 623)" class="f">Catch</span>
              <span class="k">return!</span> <span onmouseout="hideTip(event, 'fs184', 624)" onmouseover="showTip(event, 'fs184', 624)" class="f">loop</span>(<span onmouseout="hideTip(event, 'fs186', 625)" onmouseover="showTip(event, 'fs186', 625)" class="t">Stopwatch</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs193', 626)" onmouseover="showTip(event, 'fs193', 626)" class="f">StartNew</span>(),<span onmouseout="hideTip(event, 'fs187', 627)" onmouseover="showTip(event, 'fs187', 627)" class="i">partitions</span>)
            <span class="k">else</span>
              <span class="k">let!</span> <span onmouseout="hideTip(event, 'fs194', 628)" onmouseover="showTip(event, 'fs194', 628)" class="i">message</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs183', 629)" onmouseover="showTip(event, 'fs183', 629)" class="i">inbox</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs195', 630)" onmouseover="showTip(event, 'fs195', 630)" class="f">TryReceive</span>(<span class="n">1000</span>)
              <span class="k">return!</span>
                <span class="k">match</span> <span onmouseout="hideTip(event, 'fs194', 631)" onmouseover="showTip(event, 'fs194', 631)" class="i">message</span> <span class="k">with</span>
                | <span onmouseout="hideTip(event, 'fs131', 632)" onmouseover="showTip(event, 'fs131', 632)" class="p">None</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs184', 633)" onmouseover="showTip(event, 'fs184', 633)" class="f">loop</span>(<span onmouseout="hideTip(event, 'fs185', 634)" onmouseover="showTip(event, 'fs185', 634)" class="i">watch</span>, <span onmouseout="hideTip(event, 'fs187', 635)" onmouseover="showTip(event, 'fs187', 635)" class="i">partitions</span>)
                | <span onmouseout="hideTip(event, 'fs135', 636)" onmouseover="showTip(event, 'fs135', 636)" class="p">Some</span> <span onmouseout="hideTip(event, 'fs196', 637)" onmouseover="showTip(event, 'fs196', 637)" class="i">m</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs184', 638)" onmouseover="showTip(event, 'fs184', 638)" class="f">loop</span>(<span onmouseout="hideTip(event, 'fs185', 639)" onmouseover="showTip(event, 'fs185', 639)" class="i">watch</span>, <span onmouseout="hideTip(event, 'fs187', 640)" onmouseover="showTip(event, 'fs187', 640)" class="i">partitions</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs178', 641)" onmouseover="showTip(event, 'fs178', 641)" class="f">integrate</span> <span onmouseout="hideTip(event, 'fs196', 642)" onmouseover="showTip(event, 'fs196', 642)" class="i">m</span>)
          }
        <span onmouseout="hideTip(event, 'fs184', 643)" onmouseover="showTip(event, 'fs184', 643)" class="f">loop</span>(<span onmouseout="hideTip(event, 'fs186', 644)" onmouseover="showTip(event, 'fs186', 644)" class="t">Stopwatch</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs193', 645)" onmouseover="showTip(event, 'fs193', 645)" class="f">StartNew</span>(), <span onmouseout="hideTip(event, 'fs146', 646)" onmouseover="showTip(event, 'fs146', 646)" class="t">Map</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs197', 647)" onmouseover="showTip(event, 'fs197', 647)" class="i">empty</span>))<span class="o">.</span><span class="f">Post</span>
</code></pre>
<h3>Subscribing (Parallelism + Manual Offset Management)</h3>
<p>Let's suppose we want to process multiple messages at a time on multiple threads.</p>
<p>To tie all of this together, we create a hybrid of <code>subscribeCallback</code> and <code>subscribeSeq</code>
functions above. It accepts an onMessage callback, tracks all offsets, and executes using
some degree of concurrency.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs202', 654)" onmouseover="showTip(event, 'fs202', 654)" class="f">subscribeParallel</span> <span onmouseout="hideTip(event, 'fs203', 655)" onmouseover="showTip(event, 'fs203', 655)" class="i">concurrency</span> <span onmouseout="hideTip(event, 'fs63', 656)" onmouseover="showTip(event, 'fs63', 656)" class="i">brokerCsv</span> <span onmouseout="hideTip(event, 'fs64', 657)" onmouseover="showTip(event, 'fs64', 657)" class="i">group</span> <span onmouseout="hideTip(event, 'fs78', 658)" onmouseover="showTip(event, 'fs78', 658)" class="i">topic</span> <span onmouseout="hideTip(event, 'fs204', 659)" onmouseover="showTip(event, 'fs204', 659)" class="f">onMessage</span> <span class="o">=</span>
</code></pre>
<ol>
<li>when a partition is assigned, we start tracking its offsets</li>
<li>before business logic, offsets are marked as active</li>
<li>after business logic, offsets are marked as processed</li>
<li>when a partition is revoked, we stop tracking its offsets</li>
</ol>
<pre class="fssnip highlighted"><code lang="fsharp">  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs206', 705)" onmouseover="showTip(event, 'fs206', 705)" class="f">monitor</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs207', 706)" onmouseover="showTip(event, 'fs207', 706)" class="t">OffsetMonitor</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs177', 707)" onmouseover="showTip(event, 'fs177', 707)" class="f">create</span> <span onmouseout="hideTip(event, 'fs79', 708)" onmouseover="showTip(event, 'fs79', 708)" class="i">consumer</span> <span onmouseout="hideTip(event, 'fs78', 709)" onmouseover="showTip(event, 'fs78', 709)" class="i">topic</span>

  <span onmouseout="hideTip(event, 'fs79', 710)" onmouseover="showTip(event, 'fs79', 710)" class="i">consumer</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs55', 711)" onmouseover="showTip(event, 'fs55', 711)" class="i">OnPartitionsAssigned</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs52', 712)" onmouseover="showTip(event, 'fs52', 712)" class="f">Add</span>(
    <span onmouseout="hideTip(event, 'fs31', 713)" onmouseover="showTip(event, 'fs31', 713)" class="f">ofTopicPartitionOffsets</span> <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs207', 714)" onmouseover="showTip(event, 'fs207', 714)" class="t">OffsetMonitor</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs171', 715)" onmouseover="showTip(event, 'fs171', 715)" class="f">assign</span> <span onmouseout="hideTip(event, 'fs206', 716)" onmouseover="showTip(event, 'fs206', 716)" class="f">monitor</span>) <span class="c">// (1)</span>
  <span onmouseout="hideTip(event, 'fs79', 717)" onmouseover="showTip(event, 'fs79', 717)" class="i">consumer</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs56', 718)" onmouseover="showTip(event, 'fs56', 718)" class="i">OnPartitionsRevoked</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs52', 719)" onmouseover="showTip(event, 'fs52', 719)" class="f">Add</span>(
    <span onmouseout="hideTip(event, 'fs31', 720)" onmouseover="showTip(event, 'fs31', 720)" class="f">ofTopicPartitionOffsets</span> <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs207', 721)" onmouseover="showTip(event, 'fs207', 721)" class="t">OffsetMonitor</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs173', 722)" onmouseover="showTip(event, 'fs173', 722)" class="f">revoke</span> <span onmouseout="hideTip(event, 'fs206', 723)" onmouseover="showTip(event, 'fs206', 723)" class="f">monitor</span>) <span class="c">// (4)</span>

  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs204', 724)" onmouseover="showTip(event, 'fs204', 724)" class="f">onMessage</span>(<span onmouseout="hideTip(event, 'fs116', 725)" onmouseover="showTip(event, 'fs116', 725)" class="i">message</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs112', 726)" onmouseover="showTip(event, 'fs112', 726)" class="t">Message</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs85', 727)" onmouseover="showTip(event, 'fs85', 727)" class="i">async</span> {
      <span onmouseout="hideTip(event, 'fs207', 728)" onmouseover="showTip(event, 'fs207', 728)" class="t">OffsetMonitor</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs174', 729)" onmouseover="showTip(event, 'fs174', 729)" class="f">start</span> <span onmouseout="hideTip(event, 'fs206', 730)" onmouseover="showTip(event, 'fs206', 730)" class="f">monitor</span> <span onmouseout="hideTip(event, 'fs116', 731)" onmouseover="showTip(event, 'fs116', 731)" class="i">message</span>                    <span class="c">// (2)</span>
      <span class="k">do!</span> <span onmouseout="hideTip(event, 'fs204', 732)" onmouseover="showTip(event, 'fs204', 732)" class="f">onMessage</span>(<span onmouseout="hideTip(event, 'fs116', 733)" onmouseover="showTip(event, 'fs116', 733)" class="i">message</span>)
      <span onmouseout="hideTip(event, 'fs207', 734)" onmouseover="showTip(event, 'fs207', 734)" class="t">OffsetMonitor</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs176', 735)" onmouseover="showTip(event, 'fs176', 735)" class="f">finish</span> <span onmouseout="hideTip(event, 'fs206', 736)" onmouseover="showTip(event, 'fs206', 736)" class="f">monitor</span> <span onmouseout="hideTip(event, 'fs116', 737)" onmouseover="showTip(event, 'fs116', 737)" class="i">message</span> }                 <span class="c">// (3)</span>

  <span onmouseout="hideTip(event, 'fs79', 738)" onmouseover="showTip(event, 'fs79', 738)" class="i">consumer</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs104', 739)" onmouseover="showTip(event, 'fs104', 739)" class="f">Subscribe</span>(<span class="k">new</span> <span onmouseout="hideTip(event, 'fs99', 740)" onmouseover="showTip(event, 'fs99', 740)" class="i">Collections</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs100', 741)" onmouseover="showTip(event, 'fs100', 741)" class="i">Generic</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs101', 742)" onmouseover="showTip(event, 'fs101', 742)" class="t">List</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs7', 743)" onmouseover="showTip(event, 'fs7', 743)" class="t">string</span><span class="o">&gt;</span>([<span onmouseout="hideTip(event, 'fs78', 744)" onmouseover="showTip(event, 'fs78', 744)" class="i">topic</span>]))
  <span onmouseout="hideTip(event, 'fs79', 745)" onmouseover="showTip(event, 'fs79', 745)" class="i">consumer</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs105', 746)" onmouseover="showTip(event, 'fs105', 746)" class="f">Start</span>()
</code></pre>
<p>Finally, take the messageSeq from subscribeSeq, and apply <code>onMessage</code> with
the specified degree of concurrency. (using AsyncSeq, this time :) )</p>
<pre class="fssnip highlighted"><code lang="fsharp">  <span onmouseout="hideTip(event, 'fs205', 747)" onmouseover="showTip(event, 'fs205', 747)" class="i">messageSeq</span>
  <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs208', 748)" onmouseover="showTip(event, 'fs208', 748)" class="t">AsyncSeq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs198', 749)" onmouseover="showTip(event, 'fs198', 749)" class="f">ofSeq</span>
  <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs208', 750)" onmouseover="showTip(event, 'fs208', 750)" class="t">AsyncSeq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs200', 751)" onmouseover="showTip(event, 'fs200', 751)" class="f">iterAsyncParThrottled</span> <span onmouseout="hideTip(event, 'fs203', 752)" onmouseover="showTip(event, 'fs203', 752)" class="i">concurrency</span> <span onmouseout="hideTip(event, 'fs204', 753)" onmouseover="showTip(event, 'fs204', 753)" class="f">onMessage</span>
</code></pre>
<h2>Supervision</h2>
<p>Supervising progress of a microservice running RdKafka depends on monitoring two things:</p>
<ol>
<li>the range of messages available in topic (i.e. its <code>Watermark</code> offsets), and</li>
<li>the current <code>Checkpoint</code> offsets for a consumer group relative to those <code>Watermarks</code></li>
</ol>
<h3>Watermarks</h3>
<p>A line drawn on the side of an empty ship is its low water line.  When you put cargo on the
ship, it sits lower in water.  The line drawn on the side of a fully loaded ship is its
high water line.  The same terminology is used here:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs209', 754)" onmouseover="showTip(event, 'fs209', 754)" class="t">Watermark</span> <span class="o">=</span>     <span class="c">// watermark high/low offset for each partition of a topic</span>
  { <span onmouseout="hideTip(event, 'fs210', 755)" onmouseover="showTip(event, 'fs210', 755)" class="i">Topic</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs7', 756)" onmouseover="showTip(event, 'fs7', 756)" class="t">string</span>   <span class="c">// topic</span>
    <span onmouseout="hideTip(event, 'fs211', 757)" onmouseover="showTip(event, 'fs211', 757)" class="i">Partition</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs9', 758)" onmouseover="showTip(event, 'fs9', 758)" class="t">int</span>  <span class="c">// partition of the topic</span>
    <span onmouseout="hideTip(event, 'fs212', 759)" onmouseover="showTip(event, 'fs212', 759)" class="i">High</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs11', 760)" onmouseover="showTip(event, 'fs11', 760)" class="t">int64</span>     <span class="c">// highest offset available in this partition (newest message)</span>
    <span onmouseout="hideTip(event, 'fs213', 761)" onmouseover="showTip(event, 'fs213', 761)" class="i">Low</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs11', 762)" onmouseover="showTip(event, 'fs11', 762)" class="t">int64</span> }    <span class="c">// lowest offset available in this partition (oldest message)</span>
</code></pre>
<p>To query these watermarks:</p>
<pre class="fssnip highlighted"><code lang="fsharp">[&lt;<span onmouseout="hideTip(event, 'fs127', 763)" onmouseover="showTip(event, 'fs127', 763)" class="t">CompilationRepresentation</span>(<span onmouseout="hideTip(event, 'fs128', 764)" onmouseover="showTip(event, 'fs128', 764)" class="t">CompilationRepresentationFlags</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs129', 765)" onmouseover="showTip(event, 'fs129', 765)" class="i">ModuleSuffix</span>)&gt;]
<span class="k">module</span> <span onmouseout="hideTip(event, 'fs209', 766)" onmouseover="showTip(event, 'fs209', 766)" class="t">Watermark</span> <span class="o">=</span>
  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs214', 767)" onmouseover="showTip(event, 'fs214', 767)" class="f">queryWithTimeout</span> (<span onmouseout="hideTip(event, 'fs215', 768)" onmouseover="showTip(event, 'fs215', 768)" class="i">timeout</span>) (<span onmouseout="hideTip(event, 'fs80', 769)" onmouseover="showTip(event, 'fs80', 769)" class="i">producer</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs61', 770)" onmouseover="showTip(event, 'fs61', 770)" class="t">Producer</span>) (<span onmouseout="hideTip(event, 'fs216', 771)" onmouseover="showTip(event, 'fs216', 771)" class="i">consumer</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs37', 772)" onmouseover="showTip(event, 'fs37', 772)" class="t">Consumer</span>) (<span onmouseout="hideTip(event, 'fs78', 773)" onmouseover="showTip(event, 'fs78', 773)" class="i">topic</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs6', 774)" onmouseover="showTip(event, 'fs6', 774)" class="t">Topic</span>) <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs217', 775)" onmouseover="showTip(event, 'fs217', 775)" class="f">queryWatermark</span>(<span onmouseout="hideTip(event, 'fs95', 776)" onmouseover="showTip(event, 'fs95', 776)" class="i">t</span>, <span onmouseout="hideTip(event, 'fs96', 777)" onmouseover="showTip(event, 'fs96', 777)" class="i">p</span>) <span class="o">=</span>
      <span onmouseout="hideTip(event, 'fs85', 778)" onmouseover="showTip(event, 'fs85', 778)" class="i">async</span> {
        <span class="k">let!</span> <span onmouseout="hideTip(event, 'fs218', 779)" onmouseover="showTip(event, 'fs218', 779)" class="i">w</span> <span class="o">=</span>
          <span onmouseout="hideTip(event, 'fs216', 780)" onmouseover="showTip(event, 'fs216', 780)" class="i">consumer</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs219', 781)" onmouseover="showTip(event, 'fs219', 781)" class="f">QueryWatermarkOffsets</span>(<span onmouseout="hideTip(event, 'fs220', 782)" onmouseover="showTip(event, 'fs220', 782)" class="t">TopicPartition</span>(<span onmouseout="hideTip(event, 'fs95', 783)" onmouseover="showTip(event, 'fs95', 783)" class="i">t</span>, <span onmouseout="hideTip(event, 'fs96', 784)" onmouseover="showTip(event, 'fs96', 784)" class="i">p</span>), <span onmouseout="hideTip(event, 'fs215', 785)" onmouseover="showTip(event, 'fs215', 785)" class="i">timeout</span>)
          <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs87', 786)" onmouseover="showTip(event, 'fs87', 786)" class="t">Async</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs88', 787)" onmouseover="showTip(event, 'fs88', 787)" class="f">AwaitTask</span>
        <span class="k">return</span> { <span onmouseout="hideTip(event, 'fs6', 788)" onmouseover="showTip(event, 'fs6', 788)" class="i">Topic</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs95', 789)" onmouseover="showTip(event, 'fs95', 789)" class="i">t</span>; <span onmouseout="hideTip(event, 'fs8', 790)" onmouseover="showTip(event, 'fs8', 790)" class="i">Partition</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs96', 791)" onmouseover="showTip(event, 'fs96', 791)" class="i">p</span>; <span class="i">High</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs218', 792)" onmouseover="showTip(event, 'fs218', 792)" class="i">w</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs221', 793)" onmouseover="showTip(event, 'fs221', 793)" class="i">High</span>; <span class="i">Low</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs218', 794)" onmouseover="showTip(event, 'fs218', 794)" class="i">w</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs222', 795)" onmouseover="showTip(event, 'fs222', 795)" class="i">Low</span> }
      }
    <span onmouseout="hideTip(event, 'fs85', 796)" onmouseover="showTip(event, 'fs85', 796)" class="i">async</span> {
      <span class="k">let</span> <span onmouseout="hideTip(event, 'fs78', 797)" onmouseover="showTip(event, 'fs78', 797)" class="i">topic</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs80', 798)" onmouseover="showTip(event, 'fs80', 798)" class="i">producer</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs81', 799)" onmouseover="showTip(event, 'fs81', 799)" class="f">Topic</span>(<span onmouseout="hideTip(event, 'fs78', 800)" onmouseover="showTip(event, 'fs78', 800)" class="i">topic</span>)
      <span class="k">let!</span> <span onmouseout="hideTip(event, 'fs223', 801)" onmouseover="showTip(event, 'fs223', 801)" class="i">metadata</span> <span class="o">=</span>
        <span onmouseout="hideTip(event, 'fs80', 802)" onmouseover="showTip(event, 'fs80', 802)" class="i">producer</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs224', 803)" onmouseover="showTip(event, 'fs224', 803)" class="f">Metadata</span>(<span class="i">onlyForTopic</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs78', 804)" onmouseover="showTip(event, 'fs78', 804)" class="i">topic</span>, <span onmouseout="hideTip(event, 'fs215', 805)" onmouseover="showTip(event, 'fs215', 805)" class="i">timeout</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs215', 806)" onmouseover="showTip(event, 'fs215', 806)" class="i">timeout</span>)
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs87', 807)" onmouseover="showTip(event, 'fs87', 807)" class="t">Async</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs88', 808)" onmouseover="showTip(event, 'fs88', 808)" class="f">AwaitTask</span>
      <span class="k">return!</span>
        <span onmouseout="hideTip(event, 'fs223', 809)" onmouseover="showTip(event, 'fs223', 809)" class="i">metadata</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs225', 810)" onmouseover="showTip(event, 'fs225', 810)" class="i">Topics</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs32', 811)" onmouseover="showTip(event, 'fs32', 811)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs226', 812)" onmouseover="showTip(event, 'fs226', 812)" class="f">collect</span>(<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs227', 813)" onmouseover="showTip(event, 'fs227', 813)" class="i">t</span> <span class="k">-&gt;</span> [<span class="k">for</span> <span onmouseout="hideTip(event, 'fs228', 814)" onmouseover="showTip(event, 'fs228', 814)" class="i">p</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs227', 815)" onmouseover="showTip(event, 'fs227', 815)" class="i">t</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs229', 816)" onmouseover="showTip(event, 'fs229', 816)" class="i">Partitions</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs227', 817)" onmouseover="showTip(event, 'fs227', 817)" class="i">t</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs230', 818)" onmouseover="showTip(event, 'fs230', 818)" class="i">Topic</span>, <span onmouseout="hideTip(event, 'fs228', 819)" onmouseover="showTip(event, 'fs228', 819)" class="i">p</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs231', 820)" onmouseover="showTip(event, 'fs231', 820)" class="i">PartitionId</span>])
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs32', 821)" onmouseover="showTip(event, 'fs32', 821)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs232', 822)" onmouseover="showTip(event, 'fs232', 822)" class="f">sort</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs32', 823)" onmouseover="showTip(event, 'fs32', 823)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs33', 824)" onmouseover="showTip(event, 'fs33', 824)" class="f">map</span> <span onmouseout="hideTip(event, 'fs217', 825)" onmouseover="showTip(event, 'fs217', 825)" class="f">queryWatermark</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs87', 826)" onmouseover="showTip(event, 'fs87', 826)" class="t">Async</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs233', 827)" onmouseover="showTip(event, 'fs233', 827)" class="f">Parallel</span> <span class="c">// again, consider AsyncSeq instead :)</span>
    }
</code></pre>
<h3>Checkpoints</h3>
<p>Your consumer group's current position is composed of an offset position within each partition
of the topic:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs234', 828)" onmouseover="showTip(event, 'fs234', 828)" class="t">Checkpoint</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs19', 829)" onmouseover="showTip(event, 'fs19', 829)" class="t">List</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs8', 830)" onmouseover="showTip(event, 'fs8', 830)" class="t">Partition</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs10', 831)" onmouseover="showTip(event, 'fs10', 831)" class="t">Offset</span><span class="o">&gt;</span>
</code></pre>
<p>If you're monitoring within an active consumer, you have access to the absolute latest offsets
completed for each partition.  When multiple consumers are working together in a group, however,
each has only a partial view of the overall progress.</p>
<p>It's possible to query the broker for the latest committed checkpoint for a consumer group
across all partitions of the topic:</p>
<pre class="fssnip highlighted"><code lang="fsharp">[&lt;<span onmouseout="hideTip(event, 'fs127', 832)" onmouseover="showTip(event, 'fs127', 832)" class="t">CompilationRepresentation</span>(<span onmouseout="hideTip(event, 'fs128', 833)" onmouseover="showTip(event, 'fs128', 833)" class="t">CompilationRepresentationFlags</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs129', 834)" onmouseover="showTip(event, 'fs129', 834)" class="i">ModuleSuffix</span>)&gt;]
<span class="k">module</span> <span onmouseout="hideTip(event, 'fs235', 835)" onmouseover="showTip(event, 'fs235', 835)" class="t">Checkpoint</span> <span class="o">=</span>
  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs236', 836)" onmouseover="showTip(event, 'fs236', 836)" class="f">queryWithTimeout</span> (<span onmouseout="hideTip(event, 'fs215', 837)" onmouseover="showTip(event, 'fs215', 837)" class="i">timeout</span>) (<span onmouseout="hideTip(event, 'fs80', 838)" onmouseover="showTip(event, 'fs80', 838)" class="i">producer</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs61', 839)" onmouseover="showTip(event, 'fs61', 839)" class="t">Producer</span>) (<span onmouseout="hideTip(event, 'fs216', 840)" onmouseover="showTip(event, 'fs216', 840)" class="i">consumer</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs37', 841)" onmouseover="showTip(event, 'fs37', 841)" class="t">Consumer</span>) (<span onmouseout="hideTip(event, 'fs78', 842)" onmouseover="showTip(event, 'fs78', 842)" class="i">topic</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs6', 843)" onmouseover="showTip(event, 'fs6', 843)" class="t">Topic</span>) <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs85', 844)" onmouseover="showTip(event, 'fs85', 844)" class="i">async</span> {
      <span class="k">let!</span> <span onmouseout="hideTip(event, 'fs223', 845)" onmouseover="showTip(event, 'fs223', 845)" class="i">metadata</span> <span class="o">=</span> 
        <span onmouseout="hideTip(event, 'fs80', 846)" onmouseover="showTip(event, 'fs80', 846)" class="i">producer</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs224', 847)" onmouseover="showTip(event, 'fs224', 847)" class="f">Metadata</span>(<span class="i">onlyForTopic</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs80', 848)" onmouseover="showTip(event, 'fs80', 848)" class="i">producer</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs81', 849)" onmouseover="showTip(event, 'fs81', 849)" class="f">Topic</span>(<span onmouseout="hideTip(event, 'fs78', 850)" onmouseover="showTip(event, 'fs78', 850)" class="i">topic</span>), <span onmouseout="hideTip(event, 'fs215', 851)" onmouseover="showTip(event, 'fs215', 851)" class="i">timeout</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs215', 852)" onmouseover="showTip(event, 'fs215', 852)" class="i">timeout</span>)
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs87', 853)" onmouseover="showTip(event, 'fs87', 853)" class="t">Async</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs88', 854)" onmouseover="showTip(event, 'fs88', 854)" class="f">AwaitTask</span>
      <span class="k">let</span> <span onmouseout="hideTip(event, 'fs237', 855)" onmouseover="showTip(event, 'fs237', 855)" class="i">partitions</span> <span class="o">=</span>
        <span onmouseout="hideTip(event, 'fs223', 856)" onmouseover="showTip(event, 'fs223', 856)" class="i">metadata</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs225', 857)" onmouseover="showTip(event, 'fs225', 857)" class="i">Topics</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs32', 858)" onmouseover="showTip(event, 'fs32', 858)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs226', 859)" onmouseover="showTip(event, 'fs226', 859)" class="f">collect</span>(<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs227', 860)" onmouseover="showTip(event, 'fs227', 860)" class="i">t</span> <span class="k">-&gt;</span> [<span class="k">for</span> <span onmouseout="hideTip(event, 'fs228', 861)" onmouseover="showTip(event, 'fs228', 861)" class="i">p</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs227', 862)" onmouseover="showTip(event, 'fs227', 862)" class="i">t</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs229', 863)" onmouseover="showTip(event, 'fs229', 863)" class="i">Partitions</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs227', 864)" onmouseover="showTip(event, 'fs227', 864)" class="i">t</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs230', 865)" onmouseover="showTip(event, 'fs230', 865)" class="i">Topic</span>, <span onmouseout="hideTip(event, 'fs228', 866)" onmouseover="showTip(event, 'fs228', 866)" class="i">p</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs231', 867)" onmouseover="showTip(event, 'fs231', 867)" class="i">PartitionId</span>])
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs32', 868)" onmouseover="showTip(event, 'fs32', 868)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs232', 869)" onmouseover="showTip(event, 'fs232', 869)" class="f">sort</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs32', 870)" onmouseover="showTip(event, 'fs32', 870)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs33', 871)" onmouseover="showTip(event, 'fs33', 871)" class="f">map</span> (<span class="k">fun</span> (<span onmouseout="hideTip(event, 'fs95', 872)" onmouseover="showTip(event, 'fs95', 872)" class="i">t</span>,<span onmouseout="hideTip(event, 'fs96', 873)" onmouseover="showTip(event, 'fs96', 873)" class="i">p</span>) <span class="k">-&gt;</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs220', 874)" onmouseover="showTip(event, 'fs220', 874)" class="t">TopicPartition</span>(<span onmouseout="hideTip(event, 'fs95', 875)" onmouseover="showTip(event, 'fs95', 875)" class="i">t</span>,<span onmouseout="hideTip(event, 'fs96', 876)" onmouseover="showTip(event, 'fs96', 876)" class="i">p</span>))
      <span class="k">let!</span> <span onmouseout="hideTip(event, 'fs238', 877)" onmouseover="showTip(event, 'fs238', 877)" class="i">committed</span> <span class="o">=</span>
        <span onmouseout="hideTip(event, 'fs216', 878)" onmouseover="showTip(event, 'fs216', 878)" class="i">consumer</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs239', 879)" onmouseover="showTip(event, 'fs239', 879)" class="f">Committed</span>(<span class="k">new</span> <span onmouseout="hideTip(event, 'fs99', 880)" onmouseover="showTip(event, 'fs99', 880)" class="i">Collections</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs100', 881)" onmouseover="showTip(event, 'fs100', 881)" class="i">Generic</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs101', 882)" onmouseover="showTip(event, 'fs101', 882)" class="t">List</span><span class="o">&lt;</span>_<span class="o">&gt;</span>(<span onmouseout="hideTip(event, 'fs237', 883)" onmouseover="showTip(event, 'fs237', 883)" class="i">partitions</span>), <span onmouseout="hideTip(event, 'fs215', 884)" onmouseover="showTip(event, 'fs215', 884)" class="i">timeout</span>)
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs87', 885)" onmouseover="showTip(event, 'fs87', 885)" class="t">Async</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs88', 886)" onmouseover="showTip(event, 'fs88', 886)" class="f">AwaitTask</span>
      <span class="k">let</span> <span onmouseout="hideTip(event, 'fs240', 887)" onmouseover="showTip(event, 'fs240', 887)" class="i">checkpoint</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs234', 888)" onmouseover="showTip(event, 'fs234', 888)" class="t">Checkpoint</span> <span class="o">=</span>
        <span onmouseout="hideTip(event, 'fs238', 889)" onmouseover="showTip(event, 'fs238', 889)" class="i">committed</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs32', 890)" onmouseover="showTip(event, 'fs32', 890)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs33', 891)" onmouseover="showTip(event, 'fs33', 891)" class="f">map</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs26', 892)" onmouseover="showTip(event, 'fs26', 892)" class="i">tpo</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs26', 893)" onmouseover="showTip(event, 'fs26', 893)" class="i">tpo</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs29', 894)" onmouseover="showTip(event, 'fs29', 894)" class="i">Partition</span>, <span onmouseout="hideTip(event, 'fs26', 895)" onmouseover="showTip(event, 'fs26', 895)" class="i">tpo</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs30', 896)" onmouseover="showTip(event, 'fs30', 896)" class="i">Offset</span>)
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs32', 897)" onmouseover="showTip(event, 'fs32', 897)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs241', 898)" onmouseover="showTip(event, 'fs241', 898)" class="f">sortBy</span> <span onmouseout="hideTip(event, 'fs242', 899)" onmouseover="showTip(event, 'fs242', 899)" class="f">fst</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs32', 900)" onmouseover="showTip(event, 'fs32', 900)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs34', 901)" onmouseover="showTip(event, 'fs34', 901)" class="f">toList</span>
      <span class="k">return</span> <span class="i">checkpoint</span>
    }
</code></pre>
<p>Over time, your current offset in each partition should increase as your consumer group
processes messages.  Similarly, the high watermark will also increase as new messages are
added.  The difference between your high watermark and your current position is your lag.</p>
<p>Using these figures, you can measure your performance relative to any service level agreement
in effect for your microservice, and potentially take corrective action - such as scaling
the number of consumer instances or size of machines.</p>

<div class="tip" id="fs1">namespace RdKafka</div>
<div class="tip" id="fs2">namespace System</div>
<div class="tip" id="fs3">namespace System.Collections</div>
<div class="tip" id="fs4">namespace System.Collections.Concurrent</div>
<div class="tip" id="fs5">namespace System.Diagnostics</div>
<div class="tip" id="fs6">type Topic = string<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.Topic</div>
<div class="tip" id="fs7">Multiple items<br />val string : value:&#39;T -&gt; string<br /><br />Full name: Microsoft.FSharp.Core.Operators.string<br /><br />--------------------<br />type string = String<br /><br />Full name: Microsoft.FSharp.Core.string</div>
<div class="tip" id="fs8">type Partition = int<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.Partition</div>
<div class="tip" id="fs9">Multiple items<br />val int : value:&#39;T -&gt; int (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.int<br /><br />--------------------<br />type int = int32<br /><br />Full name: Microsoft.FSharp.Core.int<br /><br />--------------------<br />type int&lt;&#39;Measure&gt; = int<br /><br />Full name: Microsoft.FSharp.Core.int&lt;_&gt;</div>
<div class="tip" id="fs10">type Offset = int64<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.Offset</div>
<div class="tip" id="fs11">Multiple items<br />val int64 : value:&#39;T -&gt; int64 (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.int64<br /><br />--------------------<br />type int64 = Int64<br /><br />Full name: Microsoft.FSharp.Core.int64<br /><br />--------------------<br />type int64&lt;&#39;Measure&gt; = int64<br /><br />Full name: Microsoft.FSharp.Core.int64&lt;_&gt;</div>
<div class="tip" id="fs12">type BrokerCsv = string<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.BrokerCsv</div>
<div class="tip" id="fs13">type ConsumerName = string<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.ConsumerName</div>
<div class="tip" id="fs14">type ErrorReason = string<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.ErrorReason</div>
<div class="tip" id="fs15">Multiple items<br />module Event<br /><br />from Microsoft.FSharp.Control<br /><br />--------------------<br />type Event =<br />&#160;&#160;| Statistics of string<br />&#160;&#160;| OffsetCommit of ErrorCode * List&lt;Topic * Partition * Offset&gt;<br />&#160;&#160;| EndReached of Topic * Partition * Offset<br />&#160;&#160;| PartitionsAssigned of List&lt;Topic * Partition * Offset&gt;<br />&#160;&#160;| PartitionsRevoked of List&lt;Topic * Partition * Offset&gt;<br />&#160;&#160;| ConsumerError of ErrorCode<br />&#160;&#160;| Error of ErrorCode * string<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.Event<br /><br />--------------------<br />type Event&lt;&#39;T&gt; =<br />&#160;&#160;new : unit -&gt; Event&lt;&#39;T&gt;<br />&#160;&#160;member Trigger : arg:&#39;T -&gt; unit<br />&#160;&#160;member Publish : IEvent&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Control.Event&lt;_&gt;<br /><br />--------------------<br />type Event&lt;&#39;Delegate,&#39;Args (requires delegate and &#39;Delegate :&gt; Delegate)&gt; =<br />&#160;&#160;new : unit -&gt; Event&lt;&#39;Delegate,&#39;Args&gt;<br />&#160;&#160;member Trigger : sender:obj * args:&#39;Args -&gt; unit<br />&#160;&#160;member Publish : IEvent&lt;&#39;Delegate,&#39;Args&gt;<br /><br />Full name: Microsoft.FSharp.Control.Event&lt;_,_&gt;<br /><br />--------------------<br />new : unit -&gt; Event&lt;&#39;T&gt;<br /><br />--------------------<br />new : unit -&gt; Event&lt;&#39;Delegate,&#39;Args&gt;</div>
<div class="tip" id="fs16">union case Event.Statistics: string -&gt; Event</div>
<div class="tip" id="fs17">union case Event.OffsetCommit: ErrorCode * List&lt;Topic * Partition * Offset&gt; -&gt; Event</div>
<div class="tip" id="fs18">type ErrorCode =<br />&#160;&#160;| _BEGIN = -200<br />&#160;&#160;| _BAD_MSG = -199<br />&#160;&#160;| _BAD_COMPRESSION = -198<br />&#160;&#160;| _DESTROY = -197<br />&#160;&#160;| _FAIL = -196<br />&#160;&#160;| _TRANSPORT = -195<br />&#160;&#160;| _CRIT_SYS_RESOURCE = -194<br />&#160;&#160;| _RESOLVE = -193<br />&#160;&#160;| _MSG_TIMED_OUT = -192<br />&#160;&#160;| _PARTITION_EOF = -191<br />&#160;&#160;...<br /><br />Full name: RdKafka.ErrorCode</div>
<div class="tip" id="fs19">Multiple items<br />module List<br /><br />from Microsoft.FSharp.Collections<br /><br />--------------------<br />type List&lt;&#39;T&gt; =<br />&#160;&#160;| ( [] )<br />&#160;&#160;| ( :: ) of Head: &#39;T * Tail: &#39;T list<br />&#160;&#160;interface IEnumerable<br />&#160;&#160;interface IEnumerable&lt;&#39;T&gt;<br />&#160;&#160;member GetSlice : startIndex:int option * endIndex:int option -&gt; &#39;T list<br />&#160;&#160;member Head : &#39;T<br />&#160;&#160;member IsEmpty : bool<br />&#160;&#160;member Item : index:int -&gt; &#39;T with get<br />&#160;&#160;member Length : int<br />&#160;&#160;member Tail : &#39;T list<br />&#160;&#160;static member Cons : head:&#39;T * tail:&#39;T list -&gt; &#39;T list<br />&#160;&#160;static member Empty : &#39;T list<br /><br />Full name: Microsoft.FSharp.Collections.List&lt;_&gt;</div>
<div class="tip" id="fs20">union case Event.EndReached: Topic * Partition * Offset -&gt; Event</div>
<div class="tip" id="fs21">union case Event.PartitionsAssigned: List&lt;Topic * Partition * Offset&gt; -&gt; Event</div>
<div class="tip" id="fs22">union case Event.PartitionsRevoked: List&lt;Topic * Partition * Offset&gt; -&gt; Event</div>
<div class="tip" id="fs23">union case Event.ConsumerError: ErrorCode -&gt; Event</div>
<div class="tip" id="fs24">union case Event.Error: ErrorCode * string -&gt; Event</div>
<div class="tip" id="fs25">val ofTopicPartitionOffset : tpo:TopicPartitionOffset -&gt; string * int * int64<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.ofTopicPartitionOffset</div>
<div class="tip" id="fs26">val tpo : TopicPartitionOffset</div>
<div class="tip" id="fs27">Multiple items<br />type TopicPartitionOffset =<br />&#160;&#160;struct<br />&#160;&#160;&#160;&#160;new : topic:string * partition:int * offset:int64 -&gt; TopicPartitionOffset<br />&#160;&#160;&#160;&#160;member Offset : int64 with get, set<br />&#160;&#160;&#160;&#160;member Partition : int with get, set<br />&#160;&#160;&#160;&#160;member ToString : unit -&gt; string<br />&#160;&#160;&#160;&#160;member Topic : string with get, set<br />&#160;&#160;end<br /><br />Full name: RdKafka.TopicPartitionOffset<br /><br />--------------------<br />TopicPartitionOffset()<br />TopicPartitionOffset(topic: string, partition: int, offset: int64) : unit</div>
<div class="tip" id="fs28">property TopicPartitionOffset.Topic: string</div>
<div class="tip" id="fs29">property TopicPartitionOffset.Partition: int</div>
<div class="tip" id="fs30">property TopicPartitionOffset.Offset: int64</div>
<div class="tip" id="fs31">val ofTopicPartitionOffsets : (Collections.Generic.IList&lt;TopicPartitionOffset&gt; -&gt; (string * int * int64) list)<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.ofTopicPartitionOffsets</div>
<div class="tip" id="fs32">module Seq<br /><br />from Microsoft.FSharp.Collections</div>
<div class="tip" id="fs33">val map : mapping:(&#39;T -&gt; &#39;U) -&gt; source:seq&lt;&#39;T&gt; -&gt; seq&lt;&#39;U&gt;<br /><br />Full name: Microsoft.FSharp.Collections.Seq.map</div>
<div class="tip" id="fs34">val toList : source:seq&lt;&#39;T&gt; -&gt; &#39;T list<br /><br />Full name: Microsoft.FSharp.Collections.Seq.toList</div>
<div class="tip" id="fs35">val ofCommit : oca:Consumer.OffsetCommitArgs -&gt; ErrorCode * (string * int * int64) list<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.ofCommit</div>
<div class="tip" id="fs36">val oca : Consumer.OffsetCommitArgs</div>
<div class="tip" id="fs37">Multiple items<br />type Consumer =<br />&#160;&#160;inherit Handle<br />&#160;&#160;new : config:Config * ?brokerList:string -&gt; Consumer<br />&#160;&#160;member Assign : partitions:List&lt;TopicPartitionOffset&gt; -&gt; unit<br />&#160;&#160;member Assignment : List&lt;TopicPartition&gt;<br />&#160;&#160;member Commit : unit -&gt; Task + 2 overloads<br />&#160;&#160;member Committed : partitions:List&lt;TopicPartition&gt; * timeout:TimeSpan -&gt; Task&lt;List&lt;TopicPartitionOffset&gt;&gt;<br />&#160;&#160;member Consume : timeout:TimeSpan -&gt; Nullable&lt;MessageAndError&gt;<br />&#160;&#160;member Dispose : unit -&gt; unit<br />&#160;&#160;member GetWatermarkOffsets : topicPartition:TopicPartition -&gt; Offsets<br />&#160;&#160;member Position : partitions:List&lt;TopicPartition&gt; -&gt; List&lt;TopicPartitionOffset&gt;<br />&#160;&#160;member Subscribe : topics:List&lt;string&gt; -&gt; unit<br />&#160;&#160;...<br />&#160;&#160;nested type OffsetCommitArgs<br /><br />Full name: RdKafka.Consumer<br /><br />--------------------<br />Consumer(config: Config, ?brokerList: string) : unit</div>
<div class="tip" id="fs38">type OffsetCommitArgs =<br />&#160;&#160;struct<br />&#160;&#160;&#160;&#160;member Error : ErrorCode with get, set<br />&#160;&#160;&#160;&#160;member Offsets : IList&lt;TopicPartitionOffset&gt; with get, set<br />&#160;&#160;end<br /><br />Full name: RdKafka.Consumer.OffsetCommitArgs</div>
<div class="tip" id="fs39">property Consumer.OffsetCommitArgs.Error: ErrorCode</div>
<div class="tip" id="fs40">property Consumer.OffsetCommitArgs.Offsets: Collections.Generic.IList&lt;TopicPartitionOffset&gt;</div>
<div class="tip" id="fs41">val ofError : ea:Handle.ErrorArgs -&gt; ErrorCode * string<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.ofError</div>
<div class="tip" id="fs42">val ea : Handle.ErrorArgs</div>
<div class="tip" id="fs43">Multiple items<br />type Handle =<br />&#160;&#160;new : unit -&gt; Handle<br />&#160;&#160;member Dispose : unit -&gt; unit<br />&#160;&#160;member ListGroup : group:string * timeout:TimeSpan -&gt; Task&lt;GroupInfo&gt;<br />&#160;&#160;member ListGroups : timeout:TimeSpan -&gt; Task&lt;List&lt;GroupInfo&gt;&gt;<br />&#160;&#160;member LogLevel : -&gt; int with  set<br />&#160;&#160;member MemberId : string<br />&#160;&#160;member Metadata : ?allTopics:bool * ?onlyForTopic:Topic * ?includeInternal:bool * ?timeout:TimeSpan -&gt; Task&lt;Metadata&gt;<br />&#160;&#160;member Name : string<br />&#160;&#160;member OutQueueLength : int64<br />&#160;&#160;member QueryWatermarkOffsets : topicPartition:TopicPartition * ?timeout:TimeSpan -&gt; Task&lt;Offsets&gt;<br />&#160;&#160;...<br />&#160;&#160;nested type ErrorArgs<br /><br />Full name: RdKafka.Handle<br /><br />--------------------<br />Handle() : unit</div>
<div class="tip" id="fs44">type ErrorArgs =<br />&#160;&#160;struct<br />&#160;&#160;&#160;&#160;member ErrorCode : ErrorCode with get, set<br />&#160;&#160;&#160;&#160;member Reason : string with get, set<br />&#160;&#160;end<br /><br />Full name: RdKafka.Handle.ErrorArgs</div>
<div class="tip" id="fs45">property Handle.ErrorArgs.ErrorCode: ErrorCode</div>
<div class="tip" id="fs46">property Handle.ErrorArgs.Reason: string</div>
<div class="tip" id="fs47">val toLog : _arg1:Event -&gt; unit<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.toLog</div>
<div class="tip" id="fs48">val fromConsumerToLog : c:EventConsumer -&gt; unit<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.fromConsumerToLog</div>
<div class="tip" id="fs49">val c : EventConsumer</div>
<div class="tip" id="fs50">Multiple items<br />type EventConsumer =<br />&#160;&#160;inherit Consumer<br />&#160;&#160;new : config:Config * ?brokerList:string -&gt; EventConsumer<br />&#160;&#160;member Dispose : unit -&gt; unit<br />&#160;&#160;member Start : unit -&gt; unit<br />&#160;&#160;member Stop : unit -&gt; Task<br />&#160;&#160;event OnMessage : EventHandler&lt;Message&gt;<br />&#160;&#160;event OnConsumerError : EventHandler&lt;ErrorCode&gt;<br />&#160;&#160;event OnEndReached : EventHandler&lt;TopicPartitionOffset&gt;<br /><br />Full name: RdKafka.EventConsumer<br /><br />--------------------<br />EventConsumer(config: Config, ?brokerList: string) : unit</div>
<div class="tip" id="fs51">event Handle.OnStatistics: IEvent&lt;EventHandler&lt;string&gt;,string&gt;</div>
<div class="tip" id="fs52">member IObservable.Add : callback:(&#39;T -&gt; unit) -&gt; unit</div>
<div class="tip" id="fs53">event Consumer.OnOffsetCommit: IEvent&lt;EventHandler&lt;Consumer.OffsetCommitArgs&gt;,Consumer.OffsetCommitArgs&gt;</div>
<div class="tip" id="fs54">event EventConsumer.OnEndReached: IEvent&lt;EventHandler&lt;TopicPartitionOffset&gt;,TopicPartitionOffset&gt;</div>
<div class="tip" id="fs55">event Consumer.OnPartitionsAssigned: IEvent&lt;EventHandler&lt;Collections.Generic.List&lt;TopicPartitionOffset&gt;&gt;,Collections.Generic.List&lt;TopicPartitionOffset&gt;&gt;</div>
<div class="tip" id="fs56">event Consumer.OnPartitionsRevoked: IEvent&lt;EventHandler&lt;Collections.Generic.List&lt;TopicPartitionOffset&gt;&gt;,Collections.Generic.List&lt;TopicPartitionOffset&gt;&gt;</div>
<div class="tip" id="fs57">event EventConsumer.OnConsumerError: IEvent&lt;EventHandler&lt;ErrorCode&gt;,ErrorCode&gt;</div>
<div class="tip" id="fs58">event Handle.OnError: IEvent&lt;EventHandler&lt;Handle.ErrorArgs&gt;,Handle.ErrorArgs&gt;</div>
<div class="tip" id="fs59">val fromProducerToLog : p:Producer -&gt; unit<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.fromProducerToLog</div>
<div class="tip" id="fs60">val p : Producer</div>
<div class="tip" id="fs61">Multiple items<br />type Producer =<br />&#160;&#160;inherit Handle<br />&#160;&#160;new : brokerList:string -&gt; Producer + 1 overload<br />&#160;&#160;member Topic : topic:string * ?config:TopicConfig -&gt; Topic<br /><br />Full name: RdKafka.Producer<br /><br />--------------------<br />Producer(brokerList: string) : unit<br />Producer(config: Config, ?brokerList: string) : unit</div>
<div class="tip" id="fs62">val connect : brokerCsv:BrokerCsv -&gt; group:ConsumerName -&gt; autoCommit:bool -&gt; EventConsumer * Producer<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.connect</div>
<div class="tip" id="fs63">val brokerCsv : BrokerCsv</div>
<div class="tip" id="fs64">val group : ConsumerName</div>
<div class="tip" id="fs65">val autoCommit : bool</div>
<div class="tip" id="fs66">type bool = Boolean<br /><br />Full name: Microsoft.FSharp.Core.bool</div>
<div class="tip" id="fs67">val config : Config</div>
<div class="tip" id="fs68">Multiple items<br />type Config =<br />&#160;&#160;new : unit -&gt; Config<br />&#160;&#160;member DefaultTopicConfig : TopicConfig with get, set<br />&#160;&#160;member Dump : unit -&gt; Dictionary&lt;string, string&gt;<br />&#160;&#160;member EnableAutoCommit : bool with get, set<br />&#160;&#160;member GroupId : string with get, set<br />&#160;&#160;member Item : string -&gt; string with get, set<br />&#160;&#160;member Logger : LogCallback with get, set<br />&#160;&#160;member StatisticsInterval : TimeSpan with get, set<br />&#160;&#160;nested type LogCallback<br /><br />Full name: RdKafka.Config<br /><br />--------------------<br />Config() : unit</div>
<div class="tip" id="fs69">property Config.GroupId: string</div>
<div class="tip" id="fs70">property Config.StatisticsInterval: TimeSpan</div>
<div class="tip" id="fs71">Multiple items<br />type TimeSpan =<br />&#160;&#160;struct<br />&#160;&#160;&#160;&#160;new : ticks:int64 -&gt; TimeSpan + 3 overloads<br />&#160;&#160;&#160;&#160;member Add : ts:TimeSpan -&gt; TimeSpan<br />&#160;&#160;&#160;&#160;member CompareTo : value:obj -&gt; int + 1 overload<br />&#160;&#160;&#160;&#160;member Days : int<br />&#160;&#160;&#160;&#160;member Duration : unit -&gt; TimeSpan<br />&#160;&#160;&#160;&#160;member Equals : value:obj -&gt; bool + 1 overload<br />&#160;&#160;&#160;&#160;member GetHashCode : unit -&gt; int<br />&#160;&#160;&#160;&#160;member Hours : int<br />&#160;&#160;&#160;&#160;member Milliseconds : int<br />&#160;&#160;&#160;&#160;member Minutes : int<br />&#160;&#160;&#160;&#160;...<br />&#160;&#160;end<br /><br />Full name: System.TimeSpan<br /><br />--------------------<br />TimeSpan()<br />TimeSpan(ticks: int64) : unit<br />TimeSpan(hours: int, minutes: int, seconds: int) : unit<br />TimeSpan(days: int, hours: int, minutes: int, seconds: int) : unit<br />TimeSpan(days: int, hours: int, minutes: int, seconds: int, milliseconds: int) : unit</div>
<div class="tip" id="fs72">TimeSpan.FromSeconds(value: float) : TimeSpan</div>
<div class="tip" id="fs73">property Config.EnableAutoCommit: bool</div>
<div class="tip" id="fs74">property Config.DefaultTopicConfig: TopicConfig</div>
<div class="tip" id="fs75">val topicConfig : TopicConfig</div>
<div class="tip" id="fs76">Multiple items<br />type TopicConfig =<br />&#160;&#160;new : unit -&gt; TopicConfig<br />&#160;&#160;member CustomPartitioner : Partitioner with get, set<br />&#160;&#160;member Dump : unit -&gt; Dictionary&lt;string, string&gt;<br />&#160;&#160;member Item : string -&gt; string with get, set<br />&#160;&#160;nested type Partitioner<br /><br />Full name: RdKafka.TopicConfig<br /><br />--------------------<br />TopicConfig() : unit</div>
<div class="tip" id="fs77">val publish : brokerCsv:BrokerCsv -&gt; group:ConsumerName -&gt; topic:Topic -&gt; (byte [] * byte [] -&gt; Async&lt;int * int64&gt;)<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.publish</div>
<div class="tip" id="fs78">val topic : Topic</div>
<div class="tip" id="fs79">val consumer : EventConsumer</div>
<div class="tip" id="fs80">val producer : Producer</div>
<div class="tip" id="fs81">Producer.Topic(topic: string, ?config: TopicConfig) : Topic</div>
<div class="tip" id="fs82">val key : byte []</div>
<div class="tip" id="fs83">Multiple items<br />val byte : value:&#39;T -&gt; byte (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.byte<br /><br />--------------------<br />type byte = Byte<br /><br />Full name: Microsoft.FSharp.Core.byte</div>
<div class="tip" id="fs84">val payload : byte []</div>
<div class="tip" id="fs85">val async : AsyncBuilder<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.async</div>
<div class="tip" id="fs86">val report : DeliveryReport</div>
<div class="tip" id="fs87">Multiple items<br />type Async<br />static member AsBeginEnd : computation:(&#39;Arg -&gt; Async&lt;&#39;T&gt;) -&gt; (&#39;Arg * AsyncCallback * obj -&gt; IAsyncResult) * (IAsyncResult -&gt; &#39;T) * (IAsyncResult -&gt; unit)<br />static member AwaitEvent : event:IEvent&lt;&#39;Del,&#39;T&gt; * ?cancelAction:(unit -&gt; unit) -&gt; Async&lt;&#39;T&gt; (requires delegate and &#39;Del :&gt; Delegate)<br />static member AwaitIAsyncResult : iar:IAsyncResult * ?millisecondsTimeout:int -&gt; Async&lt;bool&gt;<br />static member AwaitTask : task:Task -&gt; Async&lt;unit&gt;<br />static member AwaitTask : task:Task&lt;&#39;T&gt; -&gt; Async&lt;&#39;T&gt;<br />static member AwaitWaitHandle : waitHandle:WaitHandle * ?millisecondsTimeout:int -&gt; Async&lt;bool&gt;<br />static member CancelDefaultToken : unit -&gt; unit<br />static member Catch : computation:Async&lt;&#39;T&gt; -&gt; Async&lt;Choice&lt;&#39;T,exn&gt;&gt;<br />static member FromBeginEnd : beginAction:(AsyncCallback * obj -&gt; IAsyncResult) * endAction:(IAsyncResult -&gt; &#39;T) * ?cancelAction:(unit -&gt; unit) -&gt; Async&lt;&#39;T&gt;<br />static member FromBeginEnd : arg:&#39;Arg1 * beginAction:(&#39;Arg1 * AsyncCallback * obj -&gt; IAsyncResult) * endAction:(IAsyncResult -&gt; &#39;T) * ?cancelAction:(unit -&gt; unit) -&gt; Async&lt;&#39;T&gt;<br />static member FromBeginEnd : arg1:&#39;Arg1 * arg2:&#39;Arg2 * beginAction:(&#39;Arg1 * &#39;Arg2 * AsyncCallback * obj -&gt; IAsyncResult) * endAction:(IAsyncResult -&gt; &#39;T) * ?cancelAction:(unit -&gt; unit) -&gt; Async&lt;&#39;T&gt;<br />static member FromBeginEnd : arg1:&#39;Arg1 * arg2:&#39;Arg2 * arg3:&#39;Arg3 * beginAction:(&#39;Arg1 * &#39;Arg2 * &#39;Arg3 * AsyncCallback * obj -&gt; IAsyncResult) * endAction:(IAsyncResult -&gt; &#39;T) * ?cancelAction:(unit -&gt; unit) -&gt; Async&lt;&#39;T&gt;<br />static member FromContinuations : callback:((&#39;T -&gt; unit) * (exn -&gt; unit) * (OperationCanceledException -&gt; unit) -&gt; unit) -&gt; Async&lt;&#39;T&gt;<br />static member Ignore : computation:Async&lt;&#39;T&gt; -&gt; Async&lt;unit&gt;<br />static member OnCancel : interruption:(unit -&gt; unit) -&gt; Async&lt;IDisposable&gt;<br />static member Parallel : computations:seq&lt;Async&lt;&#39;T&gt;&gt; -&gt; Async&lt;&#39;T []&gt;<br />static member RunSynchronously : computation:Async&lt;&#39;T&gt; * ?timeout:int * ?cancellationToken:CancellationToken -&gt; &#39;T<br />static member Sleep : millisecondsDueTime:int -&gt; Async&lt;unit&gt;<br />static member Start : computation:Async&lt;unit&gt; * ?cancellationToken:CancellationToken -&gt; unit<br />static member StartAsTask : computation:Async&lt;&#39;T&gt; * ?taskCreationOptions:TaskCreationOptions * ?cancellationToken:CancellationToken -&gt; Task&lt;&#39;T&gt;<br />static member StartChild : computation:Async&lt;&#39;T&gt; * ?millisecondsTimeout:int -&gt; Async&lt;Async&lt;&#39;T&gt;&gt;<br />static member StartChildAsTask : computation:Async&lt;&#39;T&gt; * ?taskCreationOptions:TaskCreationOptions -&gt; Async&lt;Task&lt;&#39;T&gt;&gt;<br />static member StartImmediate : computation:Async&lt;unit&gt; * ?cancellationToken:CancellationToken -&gt; unit<br />static member StartWithContinuations : computation:Async&lt;&#39;T&gt; * continuation:(&#39;T -&gt; unit) * exceptionContinuation:(exn -&gt; unit) * cancellationContinuation:(OperationCanceledException -&gt; unit) * ?cancellationToken:CancellationToken -&gt; unit<br />static member SwitchToContext : syncContext:SynchronizationContext -&gt; Async&lt;unit&gt;<br />static member SwitchToNewThread : unit -&gt; Async&lt;unit&gt;<br />static member SwitchToThreadPool : unit -&gt; Async&lt;unit&gt;<br />static member TryCancelled : computation:Async&lt;&#39;T&gt; * compensation:(OperationCanceledException -&gt; unit) -&gt; Async&lt;&#39;T&gt;<br />static member CancellationToken : Async&lt;CancellationToken&gt;<br />static member DefaultCancellationToken : CancellationToken<br /><br />Full name: Microsoft.FSharp.Control.Async<br /><br />--------------------<br />type Async&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Control.Async&lt;_&gt;</div>
<div class="tip" id="fs88">static member Async.AwaitTask : task:Threading.Tasks.Task -&gt; Async&lt;unit&gt;<br />static member Async.AwaitTask : task:Threading.Tasks.Task&lt;&#39;T&gt; -&gt; Async&lt;&#39;T&gt;</div>
<div class="tip" id="fs89">Topic.Produce(payload: byte [], ?key: byte [], ?partition: int) : Threading.Tasks.Task&lt;DeliveryReport&gt;</div>
<div class="tip" id="fs90">field DeliveryReport.Partition</div>
<div class="tip" id="fs91">field DeliveryReport.Offset</div>
<div class="tip" id="fs92">val subscribeCallback : brokerCsv:BrokerCsv -&gt; group:ConsumerName -&gt; topic:Topic -&gt; onMessage:(Message -&gt; unit) -&gt; unit<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.subscribeCallback</div>
<div class="tip" id="fs93">val onMessage : (Message -&gt; unit)</div>
<div class="tip" id="fs94">val map : mapping:(&#39;T -&gt; &#39;U) -&gt; list:&#39;T list -&gt; &#39;U list<br /><br />Full name: Microsoft.FSharp.Collections.List.map</div>
<div class="tip" id="fs95">val t : string</div>
<div class="tip" id="fs96">val p : int</div>
<div class="tip" id="fs97">val o : int64</div>
<div class="tip" id="fs98">field Offset.Stored = -1000L</div>
<div class="tip" id="fs99">Multiple items<br />namespace System.Collections<br /><br />--------------------<br />namespace Microsoft.FSharp.Collections</div>
<div class="tip" id="fs100">namespace System.Collections.Generic</div>
<div class="tip" id="fs101">Multiple items<br />type List&lt;&#39;T&gt; =<br />&#160;&#160;new : unit -&gt; List&lt;&#39;T&gt; + 2 overloads<br />&#160;&#160;member Add : item:&#39;T -&gt; unit<br />&#160;&#160;member AddRange : collection:IEnumerable&lt;&#39;T&gt; -&gt; unit<br />&#160;&#160;member AsReadOnly : unit -&gt; ReadOnlyCollection&lt;&#39;T&gt;<br />&#160;&#160;member BinarySearch : item:&#39;T -&gt; int + 2 overloads<br />&#160;&#160;member Capacity : int with get, set<br />&#160;&#160;member Clear : unit -&gt; unit<br />&#160;&#160;member Contains : item:&#39;T -&gt; bool<br />&#160;&#160;member ConvertAll&lt;&#39;TOutput&gt; : converter:Converter&lt;&#39;T, &#39;TOutput&gt; -&gt; List&lt;&#39;TOutput&gt;<br />&#160;&#160;member CopyTo : array:&#39;T[] -&gt; unit + 2 overloads<br />&#160;&#160;...<br />&#160;&#160;nested type Enumerator<br /><br />Full name: System.Collections.Generic.List&lt;_&gt;<br /><br />--------------------<br />Collections.Generic.List() : unit<br />Collections.Generic.List(capacity: int) : unit<br />Collections.Generic.List(collection: Collections.Generic.IEnumerable&lt;&#39;T&gt;) : unit</div>
<div class="tip" id="fs102">Consumer.Assign(partitions: Collections.Generic.List&lt;TopicPartitionOffset&gt;) : unit</div>
<div class="tip" id="fs103">event EventConsumer.OnMessage: IEvent&lt;EventHandler&lt;Message&gt;,Message&gt;</div>
<div class="tip" id="fs104">Consumer.Subscribe(topics: Collections.Generic.List&lt;string&gt;) : unit</div>
<div class="tip" id="fs105">EventConsumer.Start() : unit</div>
<div class="tip" id="fs106">val subscribeSeq : brokerCsv:BrokerCsv -&gt; group:ConsumerName -&gt; topic:string -&gt; seq&lt;Partition * Offset * byte []&gt;<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.subscribeSeq</div>
<div class="tip" id="fs107">val topic : string</div>
<div class="tip" id="fs108">Multiple items<br />val seq : sequence:seq&lt;&#39;T&gt; -&gt; seq&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Core.Operators.seq<br /><br />--------------------<br />type seq&lt;&#39;T&gt; = Collections.Generic.IEnumerable&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Collections.seq&lt;_&gt;</div>
<div class="tip" id="fs109">val buffer : int</div>
<div class="tip" id="fs110">val messages : BlockingCollection&lt;Message&gt;</div>
<div class="tip" id="fs111">Multiple items<br />type BlockingCollection&lt;&#39;T&gt; =<br />&#160;&#160;new : unit -&gt; BlockingCollection&lt;&#39;T&gt; + 3 overloads<br />&#160;&#160;member Add : item:&#39;T -&gt; unit + 1 overload<br />&#160;&#160;member BoundedCapacity : int<br />&#160;&#160;member CompleteAdding : unit -&gt; unit<br />&#160;&#160;member CopyTo : array:&#39;T[] * index:int -&gt; unit<br />&#160;&#160;member Count : int<br />&#160;&#160;member Dispose : unit -&gt; unit<br />&#160;&#160;member GetConsumingEnumerable : unit -&gt; IEnumerable&lt;&#39;T&gt; + 1 overload<br />&#160;&#160;member IsAddingCompleted : bool<br />&#160;&#160;member IsCompleted : bool<br />&#160;&#160;...<br /><br />Full name: System.Collections.Concurrent.BlockingCollection&lt;_&gt;<br /><br />--------------------<br />BlockingCollection() : unit<br />BlockingCollection(boundedCapacity: int) : unit<br />BlockingCollection(collection: IProducerConsumerCollection&lt;&#39;T&gt;) : unit<br />BlockingCollection(collection: IProducerConsumerCollection&lt;&#39;T&gt;, boundedCapacity: int) : unit</div>
<div class="tip" id="fs112">type Message =<br />&#160;&#160;struct<br />&#160;&#160;&#160;&#160;member Key : byte[] with get, set<br />&#160;&#160;&#160;&#160;member Offset : int64 with get, set<br />&#160;&#160;&#160;&#160;member Partition : int with get, set<br />&#160;&#160;&#160;&#160;member Payload : byte[] with get, set<br />&#160;&#160;&#160;&#160;member Topic : string with get, set<br />&#160;&#160;&#160;&#160;member TopicPartitionOffset : TopicPartitionOffset<br />&#160;&#160;end<br /><br />Full name: RdKafka.Message</div>
<div class="tip" id="fs113">Multiple items<br />type ConcurrentQueue&lt;&#39;T&gt; =<br />&#160;&#160;new : unit -&gt; ConcurrentQueue&lt;&#39;T&gt; + 1 overload<br />&#160;&#160;member CopyTo : array:&#39;T[] * index:int -&gt; unit<br />&#160;&#160;member Count : int<br />&#160;&#160;member Enqueue : item:&#39;T -&gt; unit<br />&#160;&#160;member GetEnumerator : unit -&gt; IEnumerator&lt;&#39;T&gt;<br />&#160;&#160;member IsEmpty : bool<br />&#160;&#160;member ToArray : unit -&gt; &#39;T[]<br />&#160;&#160;member TryDequeue : result:&#39;T -&gt; bool<br />&#160;&#160;member TryPeek : result:&#39;T -&gt; bool<br /><br />Full name: System.Collections.Concurrent.ConcurrentQueue&lt;_&gt;<br /><br />--------------------<br />ConcurrentQueue() : unit<br />ConcurrentQueue(collection: Collections.Generic.IEnumerable&lt;&#39;T&gt;) : unit</div>
<div class="tip" id="fs114">BlockingCollection.Add(item: Message) : unit<br />BlockingCollection.Add(item: Message, cancellationToken: Threading.CancellationToken) : unit</div>
<div class="tip" id="fs115">val initInfinite : initializer:(int -&gt; &#39;T) -&gt; seq&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Collections.Seq.initInfinite</div>
<div class="tip" id="fs116">val message : Message</div>
<div class="tip" id="fs117">BlockingCollection.Take() : Message<br />BlockingCollection.Take(cancellationToken: Threading.CancellationToken) : Message</div>
<div class="tip" id="fs118">property Message.Partition: int</div>
<div class="tip" id="fs119">property Message.Offset: int64</div>
<div class="tip" id="fs120">property Message.Payload: byte []</div>
<div class="tip" id="fs121">type Offsets =<br />&#160;&#160;{Next: Offset option;<br />&#160;&#160;&#160;Active: Offset list;<br />&#160;&#160;&#160;Processed: Offset list;}<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.Offsets</div>
<div class="tip" id="fs122">Offsets.Next: Offset option</div>
<div class="tip" id="fs123">type &#39;T option = Option&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Core.option&lt;_&gt;</div>
<div class="tip" id="fs124">Offsets.Active: Offset list</div>
<div class="tip" id="fs125">type &#39;T list = List&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Collections.list&lt;_&gt;</div>
<div class="tip" id="fs126">Offsets.Processed: Offset list</div>
<div class="tip" id="fs127">Multiple items<br />type CompilationRepresentationAttribute =<br />&#160;&#160;inherit Attribute<br />&#160;&#160;new : flags:CompilationRepresentationFlags -&gt; CompilationRepresentationAttribute<br />&#160;&#160;member Flags : CompilationRepresentationFlags<br /><br />Full name: Microsoft.FSharp.Core.CompilationRepresentationAttribute<br /><br />--------------------<br />new : flags:CompilationRepresentationFlags -&gt; CompilationRepresentationAttribute</div>
<div class="tip" id="fs128">type CompilationRepresentationFlags =<br />&#160;&#160;|  None  =  0<br />&#160;&#160;|  Static  =  1<br />&#160;&#160;|  Instance  =  2<br />&#160;&#160;|  ModuleSuffix  =  4<br />&#160;&#160;|  UseNullAsTrueValue  =  8<br />&#160;&#160;|  Event  =  16<br /><br />Full name: Microsoft.FSharp.Core.CompilationRepresentationFlags</div>
<div class="tip" id="fs129">CompilationRepresentationFlags.ModuleSuffix: CompilationRepresentationFlags = 4</div>
<div class="tip" id="fs130">val empty : Offsets<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.OffsetsModule.empty</div>
<div class="tip" id="fs131">union case Option.None: Option&lt;&#39;T&gt;</div>
<div class="tip" id="fs132">val private update : _arg1:Offsets -&gt; Offsets<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.OffsetsModule.update</div>
<div class="tip" id="fs133">val x : Offsets</div>
<div class="tip" id="fs134">val max : list:&#39;T list -&gt; &#39;T (requires comparison)<br /><br />Full name: Microsoft.FSharp.Collections.List.max</div>
<div class="tip" id="fs135">union case Option.Some: Value: &#39;T -&gt; Option&lt;&#39;T&gt;</div>
<div class="tip" id="fs136">val partition : predicate:(&#39;T -&gt; bool) -&gt; list:&#39;T list -&gt; &#39;T list * &#39;T list<br /><br />Full name: Microsoft.FSharp.Collections.List.partition</div>
<div class="tip" id="fs137">val min : list:&#39;T list -&gt; &#39;T (requires comparison)<br /><br />Full name: Microsoft.FSharp.Collections.List.min</div>
<div class="tip" id="fs138">val c : Offset list</div>
<div class="tip" id="fs139">val p : Offset list</div>
<div class="tip" id="fs140">val start : x:Offset -&gt; xs:Offsets -&gt; Offsets<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.OffsetsModule.start</div>
<div class="tip" id="fs141">val x : Offset</div>
<div class="tip" id="fs142">val xs : Offsets</div>
<div class="tip" id="fs143">val finish : x:Offset -&gt; xs:Offsets -&gt; Offsets<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.OffsetsModule.finish</div>
<div class="tip" id="fs144">val filter : predicate:(&#39;T -&gt; bool) -&gt; list:&#39;T list -&gt; &#39;T list<br /><br />Full name: Microsoft.FSharp.Collections.List.filter</div>
<div class="tip" id="fs145">type Partitions = Map&lt;Partition,Offsets&gt;<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.Partitions</div>
<div class="tip" id="fs146">Multiple items<br />module Map<br /><br />from Microsoft.FSharp.Collections<br /><br />--------------------<br />type Map&lt;&#39;Key,&#39;Value (requires comparison)&gt; =<br />&#160;&#160;interface IEnumerable<br />&#160;&#160;interface IComparable<br />&#160;&#160;interface IEnumerable&lt;KeyValuePair&lt;&#39;Key,&#39;Value&gt;&gt;<br />&#160;&#160;interface ICollection&lt;KeyValuePair&lt;&#39;Key,&#39;Value&gt;&gt;<br />&#160;&#160;interface IDictionary&lt;&#39;Key,&#39;Value&gt;<br />&#160;&#160;new : elements:seq&lt;&#39;Key * &#39;Value&gt; -&gt; Map&lt;&#39;Key,&#39;Value&gt;<br />&#160;&#160;member Add : key:&#39;Key * value:&#39;Value -&gt; Map&lt;&#39;Key,&#39;Value&gt;<br />&#160;&#160;member ContainsKey : key:&#39;Key -&gt; bool<br />&#160;&#160;override Equals : obj -&gt; bool<br />&#160;&#160;member Remove : key:&#39;Key -&gt; Map&lt;&#39;Key,&#39;Value&gt;<br />&#160;&#160;...<br /><br />Full name: Microsoft.FSharp.Collections.Map&lt;_,_&gt;<br /><br />--------------------<br />new : elements:seq&lt;&#39;Key * &#39;Value&gt; -&gt; Map&lt;&#39;Key,&#39;Value&gt;</div>
<div class="tip" id="fs147">val assign : p:Partition -&gt; xs:Partitions -&gt; Partitions<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.PartitionsModule.assign</div>
<div class="tip" id="fs148">val p : Partition</div>
<div class="tip" id="fs149">val xs : Partitions</div>
<div class="tip" id="fs150">val tryFind : key:&#39;Key -&gt; table:Map&lt;&#39;Key,&#39;T&gt; -&gt; &#39;T option (requires comparison)<br /><br />Full name: Microsoft.FSharp.Collections.Map.tryFind</div>
<div class="tip" id="fs151">val add : key:&#39;Key -&gt; value:&#39;T -&gt; table:Map&lt;&#39;Key,&#39;T&gt; -&gt; Map&lt;&#39;Key,&#39;T&gt; (requires comparison)<br /><br />Full name: Microsoft.FSharp.Collections.Map.add</div>
<div class="tip" id="fs152">val start : p:Partition * o:Offset -&gt; xs:Partitions -&gt; Partitions<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.PartitionsModule.start</div>
<div class="tip" id="fs153">val o : Offset</div>
<div class="tip" id="fs154">val offsets : Offsets</div>
<div class="tip" id="fs155">val finish : p:Partition * o:Offset -&gt; xs:Partitions -&gt; Partitions<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.PartitionsModule.finish</div>
<div class="tip" id="fs156">val revoke : p:Partition -&gt; xs:Partitions -&gt; Partitions<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.PartitionsModule.revoke</div>
<div class="tip" id="fs157">val remove : key:&#39;Key -&gt; table:Map&lt;&#39;Key,&#39;T&gt; -&gt; Map&lt;&#39;Key,&#39;T&gt; (requires comparison)<br /><br />Full name: Microsoft.FSharp.Collections.Map.remove</div>
<div class="tip" id="fs158">val checkpoint : (Partitions -&gt; List&lt;Partition * Offset&gt;)<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.PartitionsModule.checkpoint</div>
<div class="tip" id="fs159">val toList : table:Map&lt;&#39;Key,&#39;T&gt; -&gt; (&#39;Key * &#39;T) list (requires comparison)<br /><br />Full name: Microsoft.FSharp.Collections.Map.toList</div>
<div class="tip" id="fs160">val choose : chooser:(&#39;T -&gt; &#39;U option) -&gt; list:&#39;T list -&gt; &#39;U list<br /><br />Full name: Microsoft.FSharp.Collections.List.choose</div>
<div class="tip" id="fs161">val o : Offsets</div>
<div class="tip" id="fs162">module Option<br /><br />from Microsoft.FSharp.Core</div>
<div class="tip" id="fs163">val map : mapping:(&#39;T -&gt; &#39;U) -&gt; option:&#39;T option -&gt; &#39;U option<br /><br />Full name: Microsoft.FSharp.Core.Option.map</div>
<div class="tip" id="fs164">type OffsetMonitor = OffsetMonitorMessage -&gt; unit<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.OffsetMonitor</div>
<div class="tip" id="fs165">type OffsetMonitorMessage =<br />&#160;&#160;| Start of Partition * Offset<br />&#160;&#160;| Finish of Partition * Offset<br />&#160;&#160;| Assign of Partition list<br />&#160;&#160;| Revoke of Partition list<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.OffsetMonitorMessage</div>
<div class="tip" id="fs166">type unit = Unit<br /><br />Full name: Microsoft.FSharp.Core.unit</div>
<div class="tip" id="fs167">union case OffsetMonitorMessage.Start: Partition * Offset -&gt; OffsetMonitorMessage</div>
<div class="tip" id="fs168">union case OffsetMonitorMessage.Finish: Partition * Offset -&gt; OffsetMonitorMessage</div>
<div class="tip" id="fs169">union case OffsetMonitorMessage.Assign: Partition list -&gt; OffsetMonitorMessage</div>
<div class="tip" id="fs170">union case OffsetMonitorMessage.Revoke: Partition list -&gt; OffsetMonitorMessage</div>
<div class="tip" id="fs171">val assign : m:(OffsetMonitorMessage -&gt; &#39;a) -&gt; ((&#39;b * Partition * &#39;c) list -&gt; &#39;a)<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.OffsetMonitorModule.assign</div>
<div class="tip" id="fs172">val m : (OffsetMonitorMessage -&gt; &#39;a)</div>
<div class="tip" id="fs173">val revoke : m:(OffsetMonitorMessage -&gt; &#39;a) -&gt; ((&#39;b * Partition * &#39;c) list -&gt; &#39;a)<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.OffsetMonitorModule.revoke</div>
<div class="tip" id="fs174">val start : m:(OffsetMonitorMessage -&gt; &#39;a) -&gt; x:Message -&gt; &#39;a<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.OffsetMonitorModule.start</div>
<div class="tip" id="fs175">val x : Message</div>
<div class="tip" id="fs176">val finish : m:(OffsetMonitorMessage -&gt; &#39;a) -&gt; x:Message -&gt; &#39;a<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.OffsetMonitorModule.finish</div>
<div class="tip" id="fs177">val create : consumer:EventConsumer -&gt; topic:Topic -&gt; (OffsetMonitorMessage -&gt; unit)<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.OffsetMonitorModule.create</div>
<div class="tip" id="fs178">val integrate : (OffsetMonitorMessage -&gt; Partitions -&gt; Partitions)</div>
<div class="tip" id="fs179">Multiple items<br />module Partitions<br /><br />from 2016-12-08-rdkafka-subscription-in-fsharp<br /><br />--------------------<br />type Partitions = Map&lt;Partition,Offsets&gt;<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.Partitions</div>
<div class="tip" id="fs180">val ps : Partition list</div>
<div class="tip" id="fs181">val foldBack : folder:(&#39;T -&gt; &#39;State -&gt; &#39;State) -&gt; list:&#39;T list -&gt; state:&#39;State -&gt; &#39;State<br /><br />Full name: Microsoft.FSharp.Collections.List.foldBack</div>
<div class="tip" id="fs182">Multiple items<br />type MailboxProcessor&lt;&#39;Msg&gt; =<br />&#160;&#160;interface IDisposable<br />&#160;&#160;new : body:(MailboxProcessor&lt;&#39;Msg&gt; -&gt; Async&lt;unit&gt;) * ?cancellationToken:CancellationToken -&gt; MailboxProcessor&lt;&#39;Msg&gt;<br />&#160;&#160;member Post : message:&#39;Msg -&gt; unit<br />&#160;&#160;member PostAndAsyncReply : buildMessage:(AsyncReplyChannel&lt;&#39;Reply&gt; -&gt; &#39;Msg) * ?timeout:int -&gt; Async&lt;&#39;Reply&gt;<br />&#160;&#160;member PostAndReply : buildMessage:(AsyncReplyChannel&lt;&#39;Reply&gt; -&gt; &#39;Msg) * ?timeout:int -&gt; &#39;Reply<br />&#160;&#160;member PostAndTryAsyncReply : buildMessage:(AsyncReplyChannel&lt;&#39;Reply&gt; -&gt; &#39;Msg) * ?timeout:int -&gt; Async&lt;&#39;Reply option&gt;<br />&#160;&#160;member Receive : ?timeout:int -&gt; Async&lt;&#39;Msg&gt;<br />&#160;&#160;member Scan : scanner:(&#39;Msg -&gt; Async&lt;&#39;T&gt; option) * ?timeout:int -&gt; Async&lt;&#39;T&gt;<br />&#160;&#160;member Start : unit -&gt; unit<br />&#160;&#160;member TryPostAndReply : buildMessage:(AsyncReplyChannel&lt;&#39;Reply&gt; -&gt; &#39;Msg) * ?timeout:int -&gt; &#39;Reply option<br />&#160;&#160;...<br /><br />Full name: Microsoft.FSharp.Control.MailboxProcessor&lt;_&gt;<br /><br />--------------------<br />new : body:(MailboxProcessor&lt;&#39;Msg&gt; -&gt; Async&lt;unit&gt;) * ?cancellationToken:Threading.CancellationToken -&gt; MailboxProcessor&lt;&#39;Msg&gt;</div>
<div class="tip" id="fs183">val inbox : MailboxProcessor&lt;OffsetMonitorMessage&gt;</div>
<div class="tip" id="fs184">val loop : (Stopwatch * Partitions -&gt; Async&lt;&#39;a&gt;)</div>
<div class="tip" id="fs185">val watch : Stopwatch</div>
<div class="tip" id="fs186">Multiple items<br />type Stopwatch =<br />&#160;&#160;new : unit -&gt; Stopwatch<br />&#160;&#160;member Elapsed : TimeSpan<br />&#160;&#160;member ElapsedMilliseconds : int64<br />&#160;&#160;member ElapsedTicks : int64<br />&#160;&#160;member IsRunning : bool<br />&#160;&#160;member Reset : unit -&gt; unit<br />&#160;&#160;member Restart : unit -&gt; unit<br />&#160;&#160;member Start : unit -&gt; unit<br />&#160;&#160;member Stop : unit -&gt; unit<br />&#160;&#160;static val Frequency : int64<br />&#160;&#160;...<br /><br />Full name: System.Diagnostics.Stopwatch<br /><br />--------------------<br />Stopwatch() : unit</div>
<div class="tip" id="fs187">val partitions : Partitions</div>
<div class="tip" id="fs188">property Stopwatch.Elapsed: TimeSpan</div>
<div class="tip" id="fs189">property TimeSpan.TotalSeconds: float</div>
<div class="tip" id="fs190">val result : Choice&lt;unit,exn&gt;</div>
<div class="tip" id="fs191">Consumer.Commit() : Threading.Tasks.Task<br />Consumer.Commit(offsets: Collections.Generic.List&lt;TopicPartitionOffset&gt;) : Threading.Tasks.Task<br />Consumer.Commit(message: Message) : Threading.Tasks.Task</div>
<div class="tip" id="fs192">static member Async.Catch : computation:Async&lt;&#39;T&gt; -&gt; Async&lt;Choice&lt;&#39;T,exn&gt;&gt;</div>
<div class="tip" id="fs193">Stopwatch.StartNew() : Stopwatch</div>
<div class="tip" id="fs194">val message : OffsetMonitorMessage option</div>
<div class="tip" id="fs195">member MailboxProcessor.TryReceive : ?timeout:int -&gt; Async&lt;&#39;Msg option&gt;</div>
<div class="tip" id="fs196">val m : OffsetMonitorMessage</div>
<div class="tip" id="fs197">val empty&lt;&#39;Key,&#39;T (requires comparison)&gt; : Map&lt;&#39;Key,&#39;T&gt; (requires comparison)<br /><br />Full name: Microsoft.FSharp.Collections.Map.empty</div>
<div class="tip" id="fs198">val ofSeq : xs:seq&lt;&#39;a&gt; -&gt; unit<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.AsyncSeq.ofSeq</div>
<div class="tip" id="fs199">val xs : seq&lt;&#39;a&gt;</div>
<div class="tip" id="fs200">val iterAsyncParThrottled : &#39;a -&gt; &#39;b -&gt; &#39;c -&gt; Async&lt;unit&gt;<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.AsyncSeq.iterAsyncParThrottled</div>
<div class="tip" id="fs201">member AsyncBuilder.Return : value:&#39;T -&gt; Async&lt;&#39;T&gt;</div>
<div class="tip" id="fs202">val subscribeParallel : concurrency:&#39;a -&gt; brokerCsv:BrokerCsv -&gt; group:ConsumerName -&gt; topic:Topic -&gt; onMessage:(Message -&gt; Async&lt;unit&gt;) -&gt; Async&lt;unit&gt;<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.subscribeParallel</div>
<div class="tip" id="fs203">val concurrency : &#39;a</div>
<div class="tip" id="fs204">val onMessage : (Message -&gt; Async&lt;unit&gt;)</div>
<div class="tip" id="fs205">val messageSeq : seq&lt;Message&gt;</div>
<div class="tip" id="fs206">val monitor : (OffsetMonitorMessage -&gt; unit)</div>
<div class="tip" id="fs207">Multiple items<br />module OffsetMonitor<br /><br />from 2016-12-08-rdkafka-subscription-in-fsharp<br /><br />--------------------<br />type OffsetMonitor = OffsetMonitorMessage -&gt; unit<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.OffsetMonitor</div>
<div class="tip" id="fs208">module AsyncSeq<br /><br />from 2016-12-08-rdkafka-subscription-in-fsharp</div>
<div class="tip" id="fs209">type Watermark =<br />&#160;&#160;{Topic: string;<br />&#160;&#160;&#160;Partition: int;<br />&#160;&#160;&#160;High: int64;<br />&#160;&#160;&#160;Low: int64;}<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.Watermark</div>
<div class="tip" id="fs210">Multiple items<br />Watermark.Topic: string<br /><br />--------------------<br />type Topic = string<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.Topic</div>
<div class="tip" id="fs211">Multiple items<br />Watermark.Partition: int<br /><br />--------------------<br />type Partition = int<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.Partition</div>
<div class="tip" id="fs212">Watermark.High: int64</div>
<div class="tip" id="fs213">Watermark.Low: int64</div>
<div class="tip" id="fs214">val queryWithTimeout : timeout:TimeSpan -&gt; producer:Producer -&gt; consumer:Consumer -&gt; topic:Topic -&gt; Async&lt;Watermark []&gt;<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.WatermarkModule.queryWithTimeout</div>
<div class="tip" id="fs215">val timeout : TimeSpan</div>
<div class="tip" id="fs216">val consumer : Consumer</div>
<div class="tip" id="fs217">val queryWatermark : (string * int -&gt; Async&lt;Watermark&gt;)</div>
<div class="tip" id="fs218">val w : Offsets</div>
<div class="tip" id="fs219">Handle.QueryWatermarkOffsets(topicPartition: TopicPartition, ?timeout: TimeSpan) : Threading.Tasks.Task&lt;Offsets&gt;</div>
<div class="tip" id="fs220">Multiple items<br />type TopicPartition =<br />&#160;&#160;struct<br />&#160;&#160;&#160;&#160;new : topic:string * partition:int -&gt; TopicPartition<br />&#160;&#160;&#160;&#160;member Partition : int with get, set<br />&#160;&#160;&#160;&#160;member ToString : unit -&gt; string<br />&#160;&#160;&#160;&#160;member Topic : string with get, set<br />&#160;&#160;end<br /><br />Full name: RdKafka.TopicPartition<br /><br />--------------------<br />TopicPartition()<br />TopicPartition(topic: string, partition: int) : unit</div>
<div class="tip" id="fs221">property Offsets.High: int64</div>
<div class="tip" id="fs222">property Offsets.Low: int64</div>
<div class="tip" id="fs223">val metadata : Metadata</div>
<div class="tip" id="fs224">Handle.Metadata(?allTopics: bool, ?onlyForTopic: Topic, ?includeInternal: bool, ?timeout: TimeSpan) : Threading.Tasks.Task&lt;Metadata&gt;</div>
<div class="tip" id="fs225">property Metadata.Topics: Collections.Generic.List&lt;TopicMetadata&gt;</div>
<div class="tip" id="fs226">val collect : mapping:(&#39;T -&gt; #seq&lt;&#39;U&gt;) -&gt; source:seq&lt;&#39;T&gt; -&gt; seq&lt;&#39;U&gt;<br /><br />Full name: Microsoft.FSharp.Collections.Seq.collect</div>
<div class="tip" id="fs227">val t : TopicMetadata</div>
<div class="tip" id="fs228">val p : PartitionMetadata</div>
<div class="tip" id="fs229">property TopicMetadata.Partitions: Collections.Generic.List&lt;PartitionMetadata&gt;</div>
<div class="tip" id="fs230">property TopicMetadata.Topic: string</div>
<div class="tip" id="fs231">property PartitionMetadata.PartitionId: int</div>
<div class="tip" id="fs232">val sort : source:seq&lt;&#39;T&gt; -&gt; seq&lt;&#39;T&gt; (requires comparison)<br /><br />Full name: Microsoft.FSharp.Collections.Seq.sort</div>
<div class="tip" id="fs233">static member Async.Parallel : computations:seq&lt;Async&lt;&#39;T&gt;&gt; -&gt; Async&lt;&#39;T []&gt;</div>
<div class="tip" id="fs234">type Checkpoint = List&lt;Partition * Offset&gt;<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.Checkpoint</div>
<div class="tip" id="fs235">Multiple items<br />module Checkpoint<br /><br />from 2016-12-08-rdkafka-subscription-in-fsharp<br /><br />--------------------<br />type Checkpoint = List&lt;Partition * Offset&gt;<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.Checkpoint</div>
<div class="tip" id="fs236">val queryWithTimeout : timeout:TimeSpan -&gt; producer:Producer -&gt; consumer:Consumer -&gt; topic:Topic -&gt; Async&lt;Checkpoint&gt;<br /><br />Full name: 2016-12-08-rdkafka-subscription-in-fsharp.CheckpointModule.queryWithTimeout</div>
<div class="tip" id="fs237">val partitions : seq&lt;TopicPartition&gt;</div>
<div class="tip" id="fs238">val committed : Collections.Generic.List&lt;TopicPartitionOffset&gt;</div>
<div class="tip" id="fs239">Consumer.Committed(partitions: Collections.Generic.List&lt;TopicPartition&gt;, timeout: TimeSpan) : Threading.Tasks.Task&lt;Collections.Generic.List&lt;TopicPartitionOffset&gt;&gt;</div>
<div class="tip" id="fs240">val checkpoint : Checkpoint</div>
<div class="tip" id="fs241">val sortBy : projection:(&#39;T -&gt; &#39;Key) -&gt; source:seq&lt;&#39;T&gt; -&gt; seq&lt;&#39;T&gt; (requires comparison)<br /><br />Full name: Microsoft.FSharp.Collections.Seq.sortBy</div>
<div class="tip" id="fs242">val fst : tuple:(&#39;T1 * &#39;T2) -&gt; &#39;T1<br /><br />Full name: Microsoft.FSharp.Core.Operators.fst</div>
